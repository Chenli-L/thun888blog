<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Thun888</title>
  
  <subtitle>夏日当空,心如深渊 | hzchu.top</subtitle>
  <link href="https://blog.hzchu.top/atom.xml" rel="self"/>
  
  <link href="https://blog.hzchu.top/"/>
  <updated>2023-08-28T15:25:56.000Z</updated>
  <id>https://blog.hzchu.top/</id>
  
  <author>
    <name>thun888</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Mirouterui简要部署指南</title>
    <link href="https://blog.hzchu.top/2023/howtorunmrui/"/>
    <id>https://blog.hzchu.top/2023/howtorunmrui/</id>
    <published>2023-08-28T15:25:56.000Z</published>
    <updated>2023-08-28T15:25:56.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>该项目是由于我厌倦了管理后台和APP的卡顿而写的，因此项目开发之初就<strong>不考虑集成在管理后台</strong>，做成一个<strong>独立</strong>的页面，并实现跨平台。</p><p>并且，调用的都是小米路由器<strong>独有</strong>的api，与Openwrt<strong>完全不兼容</strong>，我手头也没设备，<del>还没时间</del>，<strong>不会考虑成为Openwrt的插件</strong>。</p><p>用于测试的只有r1d和r4a，对于别的型号的支持，还得看大家的反馈才能完善。</p><p>感谢<code>YSC6666，黑衣剑士z，Super丶聪</code>(@bilibili)的帮助</p><p>代码开源在 <a href="https://github.com/Mirouterui/">https://github.com/Mirouterui/</a> ，欢迎 star&amp;提prヾ(≧▽≦*)o</p><div class="tag-plugin ghcard"><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/Mirouterui/mirouter-ui"><img src="https://github-readme-stats.xaoxuu.com/api/pin/?username=Mirouterui&repo=mirouter-ui&theme=white&show_owner=true"/></a></div><h2 id="面板展示"><a href="#面板展示" class="headerlink" title="面板展示"></a>面板展示</h2><div class="tag-plugin tabs" align="center"id="tab_1"><div class="nav-tabs"><div class="tab active"><a href="#tab_1-1">首页</a></div><div class="tab"><a href="#tab_1-2">路由器详情</a></div><div class="tab"><a href="#tab_1-3">设备列表</a></div><div class="tab"><a href="#tab_1-4">设备详情</a></div><div class="tab"><a href="#tab_1-5">温度显示（仅支持部分设备）</a></div></div><div class="tab-content"><div class="tab-pane active" id="tab_1-1"><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/08/29/64eda7065545f.webp" alt="首页" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">首页</span></div></div></div><div class="tab-pane" id="tab_1-2"><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/08/29/64eda5d44eefa.webp" alt="路由器详情" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">路由器详情</span></div></div></div><div class="tab-pane" id="tab_1-3"><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/08/29/64eda5d0ed93e.webp" alt="设备列表" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">设备列表</span></div></div></div><div class="tab-pane" id="tab_1-4"><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/08/29/64eda5d396d7e.webp" alt="设备详情" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">设备详情</span></div></div></div><div class="tab-pane" id="tab_1-5"><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/08/29/64eda75443b5e.webp" alt="温度显示" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">温度显示</span></div></div></div></div></div><h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><blockquote><p>小米路由器是基于Openwrt的，故下文Openwrt仅指小米路由器<br>附：<br>​<div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/08/28/64ec662280acf.webp" fancybox="true"/></div></div></p></blockquote><div class="tag-plugin tabs" align="center"id="tab_2"><div class="nav-tabs"><div class="tab active"><a href="#tab_2-1">Windows</a></div><div class="tab"><a href="#tab_2-2">Openwrt</a></div><div class="tab"><a href="#tab_2-3">Docker</a></div></div><div class="tab-content"><div class="tab-pane active" id="tab_2-1"><p>从<a href="https://github.com/thun888/mirouter-ui/releases/">Release</a>下载对应的架构的发行版</p><blockquote><p>64位：amd64，32位：i386，arm: arm</p><p>可访问<a href="https://mrui-api.hzchu.top/down/">镜像站</a>以获取更快的速度</p></blockquote><p>然后运行，程序会自动下载配置文件，在其中填上密码即可。配置文件中其它条目在下面</p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/08/29/64ed9a2394601.gif" fancybox="true"/></div></div><p>再次运行，等待下载页面静态文件，若能支持获取token即为成功</p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/08/29/64ed9a23945b0.gif" fancybox="true"/></div></div><blockquote><p>部分设备出现无法运行&amp;无法找到配置文件可使用“不使用upx压缩”版本（即带<code>_noupx</code>后缀的版本）</p></blockquote></div><div class="tab-pane" id="tab_2-2"><p>从<a href="https://d.hzchu.top/e">Release</a>复制对应的架构的发行版的下载链接</p><blockquote><p>使用<code>uname –a</code>查看架构（如果为<code>armv7l</code>，考虑使用<code>armv5</code>版本）</p></blockquote><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/08/29/64ed9b78dbe91.webp" alt="R1D" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">R1D</span></div></div><p>运行：</p><blockquote><p>curl –L yourlink –o mirouterui</p><p>chmod 777 mirouterui</p><p>.&#x2F;mirouterui</p></blockquote><p>程序会自动下载配置文件，在其中填上密码即可。配置文件中其它条目在下面。.</p><p>再次运行，等待下载页面静态文件</p><p>若能支持获取token即为成功</p><p><strong>常见问题：</strong></p><ol><li>无法下载配置文件，<del>路由器太老了</del></li></ol><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/08/29/64ed9e59288c3.webp" fancybox="true"/></div></div><blockquote><p>使用 <code>curl https://mruiapi.hzchu.top/downloadconfig -o config.json</code> 手动下载</p></blockquote><ol start="2"><li>无法下载配置文件</li></ol><p>从<a href="https://d.hzchu.top/d">Mirouterui&#x2F;static: 前端静态文件 (github.com)</a>下载，并解压到<code>static</code>目录</p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/08/29/64eda04788f04.webp" fancybox="true"/></div></div></div><div class="tab-pane" id="tab_2-3"><p>命令：</p><blockquote><p>docker run -d -p 6789:6789 -v $(pwd):&#x2F;app&#x2F;data –name mirouter-ui –restart&#x3D;always thun888&#x2F;mirouter-ui</p></blockquote><p>新建一个文件夹，并在该文件夹里运行上述命令，程序会在该文件夹里生成配置文件，修改即可</p><p>修改完成后重启该容器（或等待自动重启）</p></div></div></div><p>最后命令窗口中会显示网页的访问端口，使用设备的<code>ip地址+端口号(6789)</code>访问面板</p><h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><ol><li><p>密码正确，但无法登陆：尝试获取自己路由器的key&amp;iv，可参考<a href="https://d.hzchu.top/c">视频</a>或使用<a href="https://d.hzchu.top/b">自动工具</a></p></li><li><p>CPU占用为0： 受api限制，新版路由器无法正常获取，可尝试将其部署在路由器上</p></li><li><p>温度显示： 目前API模式只支持R1D,R2D,命令模式只支持红米AX6和R1D</p></li><li><p>设备显示不全： 当设备过多时，首页只会显示当前有网络活动的设备，请进入设备详细列表查看</p></li><li><p>在线前端无法使用： 受浏览器安全限制，需关闭访问私有ip限制</p></li></ol><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/08/29/64eda267463b1.webp" alt="Chrome" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">Chrome</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/08/29/64eda26a747a5.webp" alt="Edge" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">Edge</span></div></div><h3 id="配置项"><a href="#配置项" class="headerlink" title="配置项"></a>配置项</h3><table><thead><tr><th>配置名</th><th>默认值</th><th>解释</th></tr></thead><tbody><tr><td>password</td><td></td><td>路由器管理后台密码</td></tr><tr><td>key</td><td>a2ffa5c9be07488bbb04a3a47d3c5f6a</td><td>路由器管理后台key</td></tr><tr><td>iv</td><td>64175472480004614961023454661220</td><td>路由器管理后台iv</td></tr><tr><td>ip</td><td>192.168.31.1</td><td>路由器IP</td></tr><tr><td>tiny</td><td>false</td><td>启用后，不再下载静态文件，需搭配<a href="http://mrui.hzchu.top:8880/">在线前端</a>使用</td></tr><tr><td>routerunit</td><td>false</td><td>启用后，启用部分路由器上运行才能用的功能</td></tr><tr><td>port</td><td>6789</td><td>网页页面端口号</td></tr><tr><td>debug</td><td>true</td><td>debug模式，建议在测试正常后关闭</td></tr></tbody></table><h3 id="后台运行"><a href="#后台运行" class="headerlink" title="后台运行"></a>后台运行</h3><p>自行参考：</p><p><a href="https://d.hzchu.top/9">Linux命令后台运行_后台运行命令_拉普拉斯妖1228的博客-CSDN博客</a></p><p><a href="https://d.hzchu.top/a">windows守护进程工具–nssm详解 - 与f - 博客园 (cnblogs.com)</a></p><h2 id="Stars"><a href="#Stars" class="headerlink" title="Stars~"></a>Stars~</h2><p><a href="https://d.hzchu.top/7"><div class="tag-plugin image"><div class="image-bg"><img src="https://starchart.cc/mirouterui/mirouter-ui.svg" alt="Stars~" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">Stars~</span></div></div></a></p><h2 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h2><p><a href="https://d.hzchu.top/8">Mirouter-ui (github.com)</a></p><h2 id="更新日志"><a href="#更新日志" class="headerlink" title="更新日志"></a>更新日志</h2><div class="tag-plugin timeline stellar-timeline-api" api="https://cfproxy.hzchu.top/https://api.github.com/repos/Mirouterui/mirouter-ui/releases?per_page=3"></div>]]></content>
    
    
    <summary type="html">基于小米路由器API的展示面板</summary>
    
    
    
    
    <category term="Mirouterui" scheme="https://blog.hzchu.top/tags/Mirouterui/"/>
    
  </entry>
  
  <entry>
    <title>基于Onedrive的高可用性图床</title>
    <link href="https://blog.hzchu.top/2023/photoononedrive/"/>
    <id>https://blog.hzchu.top/2023/photoononedrive/</id>
    <published>2023-07-31T11:53:17.000Z</published>
    <updated>2023-07-31T11:53:17.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>一直以来，我都在尝试各种图片存储方案，一开始便是经典的Github+jsd，但考虑到违反了tos后面就用了cf+b2，但速度不尽人意。后来用了vercel反代gh和一些杂七杂八的，但换汤不换药嘛，还是不靠谱。</p><span id="more"></span><p>在差不多一年前，我在捣鼓网心云时想到个主意：何不用家里电脑作为图片存储，通过非标准端口访问绕过备案要求。于是在<a href="https://notes.hzchu.top/">随记</a>上提出个简易pcdn的想法</p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/cf1/2022/08/29/630c0d1c1087e.webp" fancybox="true"/></div></div><p>不过像我这种小站没必要搞那么重量级了，于是改进了下</p><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/08/01/64c90aaccffac.webp" fancybox="true"/></div></div><p>首先，本质上是个缓存服务，存储在OneDrive（下文简称od），通过各个节点分发图片，<del>就是给od套了个CDN嘛</del>。</p><p>因为我这网站也没多少流量，并发不高，我更倾向葫芦娃救爷爷式的单节点当主力，挂了再切换到其它节点的方式。</p><p>最后就是轻量，总不能把od下放到每个节点吧。<span class="tag-plugin emoji"><img no-lazy="" class="inline" src="https://jsd.hzchu.top/gh/norevi/waline-blobcatemojis@1.0/blobs/blobcatneutral.png"/></span></p><p>故：</p><ol><li>设立一个“主服务器”，用来将od的内容分发到节点，可以用无服务器函数，也可以直接和”图床服务器“合并。同时因为服务器间同步有延时，在”图床服务器“要留个口直接下载刚刚上传的图片。</li><li>设立一个”副服务器“，负责检测节点状况和跳转到对应节点。</li><li>”图床服务器“：使用lsky-pro作为图床程序，将od使用rclone挂载到对应的存储策略文件夹上。</li><li>节点：获取访问的链接，检查本地有无缓存，有就返回，没有就下载再返回。考虑到要用php的话配置起来麻烦，直接用py了。</li></ol><h3 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h3><ol><li>服务器 &gt;&#x3D;1台，最好是访问速度快的</li><li>一个微软账户（我这里用的是E5订阅账户）</li><li><em>有公网IP的家庭宽带（可选）</em></li></ol><p>在od中新建<code>/share/mount</code>目录，若自行更改请注意将下文涉及的地方一起修改</p><p>推荐使用Linux，如果使用Windows下文操作将有所不同，需自行更改</p><h3 id="安装（图床服务器）"><a href="#安装（图床服务器）" class="headerlink" title="安装（图床服务器）"></a>安装（图床服务器）</h3><p>首先完成“图床服务器”的搭建。</p><h4 id="前置"><a href="#前置" class="headerlink" title="前置"></a>前置</h4><h5 id="libfuse"><a href="#libfuse" class="headerlink" title="libfuse"></a>libfuse</h5><p>安装<code>meson ninja</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install meson ninja</span><br></pre></td></tr></table></figure><p>从 <a href="https://github.com/libfuse/libfuse/releases">https://github.com/libfuse/libfuse/releases</a> 下载libfuse的源码</p><p>解压，创建一个（临时）构建目录，然后 运行<code>meson</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tar xzf fuse-3.15.1.tar.gz; <span class="built_in">cd</span> fuse-3.15.1/</span><br><span class="line"><span class="built_in">mkdir</span> build; <span class="built_in">cd</span> build</span><br><span class="line">meson setup ..</span><br></pre></td></tr></table></figure><p>运行<code>ninja</code>进行安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ninja install</span><br></pre></td></tr></table></figure><h5 id="rclone"><a href="#rclone" class="headerlink" title="rclone"></a>rclone</h5><p>安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl https://rclone.org/install.sh | sudo bash</span><br></pre></td></tr></table></figure><blockquote><p>同时在本地也要安装，用来获取token</p></blockquote><p>在本地运行rclone config进行配置</p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/07/31/64c78ef1d6bdd.webp" fancybox="true"/></div></div><p>把token复制出来备用（token包括两端的{}）</p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/07/31/64c78ee02488b.webp" fancybox="true"/></div></div><p>在服务端进行同样的操作，但在<code>Edit advanced config</code>中填<code>y</code></p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/07/31/64c78d2be701c.webp" alt="image-20230731182953894" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20230731182953894</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/07/31/64c78d6802369.webp" alt="image-20230731183101473" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20230731183101473</span></div></div><p>然后一路回车，在<code>Already have a token - refresh?</code>填<code>n</code></p><p>然后按要求填写</p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/07/31/64c790cd11e2f.webp" fancybox="true"/></div></div><blockquote><p>会自动获取drive_id,drive_type，不要回车太快按过了</p></blockquote><p>挂载试试吧</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> mount</span><br><span class="line">rclone mount one:/share/mount/ ./mount/</span><br></pre></td></tr></table></figure><p>不出意外你能看见这个报错<span class="tag-plugin emoji"><img no-lazy="" class="inline" src="https://jsd.hzchu.top/gh/norevi/waline-blobcatemojis@1.0/blobs/blobcatbox.png"/></span></p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/07/31/64c791e12d260.webp" fancybox="true"/></div></div><p>打开报错涉及的文件，取消注释，保存</p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/07/31/64c791ad2e565.webp" fancybox="true"/></div></div><p>再试下，如果没报错就可以了</p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/07/31/64c7b69648695.webp" fancybox="true"/></div></div><blockquote><p>新建的mount文件夹在下文没有作用，建议删除~</p><p>使用fusermount -qzu mount 卸载</p></blockquote><h5 id="LNMP"><a href="#LNMP" class="headerlink" title="LNMP"></a>LNMP</h5><p>不用多说</p><h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><h5 id="图床本体"><a href="#图床本体" class="headerlink" title="图床本体"></a>图床本体</h5><p>我这里用的是<a href="https://docs.lsky.pro/docs/free/v2/quick-start/installation.html">Lsky Pro</a>作为图床程序，其他大同小异</p><p>按照文档安装好后，新建一个<strong>本地</strong>存储策略，访问地址指向“副服务器”，并在后面加上<code>/mount</code>，存储路径根据自己的网站路径来，如<code>/www/wwwroot/pic.hzchu.top/</code>就填<code>/www/wwwroot/pic.hzchu.top/storage/app/mount/</code></p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/07/31/64c7bd10e5167.webp" fancybox="true"/></div></div><blockquote><p>记得更改&amp;新建相应目录</p></blockquote><h5 id="Rclone"><a href="#Rclone" class="headerlink" title="Rclone"></a>Rclone</h5><p>rclone需要持久化运行，我这里建议的是Supervisor或系统自带的systemd，windows使用nssm</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rclone mount one:/share/mount/ /www/wwwroot/pic.hzchu.top/storage/app/mount/ --copy-links --no-gzip-encoding --no-check-certificate --allow-other --allow-non-empty --<span class="built_in">umask</span> 000 --vfs-cache-mode full --attr-timeout 15m --vfs-cache-max-age 240h --vfs-cache-max-size 1G --buffer-size 100M</span><br></pre></td></tr></table></figure><div class="tag-plugin tabs" align="center"id="tab_3"><div class="nav-tabs"><div class="tab active"><a href="#tab_3-1">supervisor</a></div><div class="tab"><a href="#tab_3-2">systemd</a></div></div><div class="tab-content"><div class="tab-pane active" id="tab_3-1"><p>以宝塔面板为例</p><p>打开<code>软件商店</code>，搜索并安装<code>进程守护管理器</code>：</p><p>点击<code>添加守护进程</code>，如图所示</p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/07/31/64c7c05cc5077.webp" fancybox="true"/></div></div></div><div class="tab-pane" id="tab_3-2"><p>运行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/systemd/system/rclone-one.service</span><br></pre></td></tr></table></figure><p>​写入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=rclone-one</span><br><span class="line">After=network.target remote-fs.target nss-lookup.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">User=root</span><br><span class="line">ExecStart=rclone mount one:/share/mount/ /www/wwwroot/pic.hzchu.top/storage/app/mount/ --copy-links --no-gzip-encoding --no-check-certificate --allow-other --allow-non-empty --<span class="built_in">umask</span> 000 --vfs-cache-mode full --attr-timeout 15m --vfs-cache-max-age 240h --vfs-cache-max-size 1G --buffer-size 100M</span><br><span class="line">ExecReload=/bin/kill -s HUP <span class="variable">$MAINPID</span></span><br><span class="line">ExecStop=/bin/kill -s QUIT <span class="variable">$MAINPID</span></span><br><span class="line">Restart=on-abnormal</span><br><span class="line">RestartSec=5s</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure></div></div></div><h3 id="安装（主服务器）"><a href="#安装（主服务器）" class="headerlink" title="安装（主服务器）"></a>安装（主服务器）</h3><p>可以用无服务器函数，这里使用<a href="https://github.com/spencerwooo/onedrive-vercel-index">onedrive-vercel-index</a>作为OneDrive的直链解析，<a href="https://ovi.swo.moe/zh/docs/getting-started">这里</a>是它的文档</p><p>将<code>baseDirectory</code>设为<code>/share</code></p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/07/31/64c7c4a67fdad.webp" alt="1690813605718.webp" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">1690813605718.webp</span></div></div><p>由于原作者的应用程序已过期，需要自行配置，参考<a href="https://ovi.swo.moe/zh/docs/advanced#%E4%BD%BF%E7%94%A8%E4%BD%A0%E8%87%AA%E5%B7%B1%E7%9A%84-client-id-%E4%B8%8E-secret">高级 - OneDrive Vercel Index (swo.moe)</a>进行调整</p><blockquote><p>由于<code>vercel.app</code>在国内污染严重，请绑定你的域名</p></blockquote><h3 id="中途-开香槟-测试"><a href="#中途-开香槟-测试" class="headerlink" title="中途 开香槟 测试"></a>中途 <del>开香槟</del> 测试</h3><ol><li>在图床中上传一张图片，查看是否上传成功，若出现错误，则检查图床服务器</li><li>等待5分钟后访问<code>https://yourdomain.top/zh-CN/mount/</code>，查看是否出现<code>pic</code>文件夹，并根据<code>年/月/日</code>进入子文件夹查看能否访问图片</li></ol><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/07/31/64c7c5eaae480.webp" alt="1690813930882.webp" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">1690813930882.webp</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/07/31/64c7c61147819.webp" alt="image-20230731223247351" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20230731223247351</span></div></div><h3 id="安装（副服务器）"><a href="#安装（副服务器）" class="headerlink" title="安装（副服务器）"></a>安装（副服务器）</h3><p>需要安装redis，故不推荐使用虚拟主机，但非要用可以使用Vercel的<a href="https://vercel.com/dashboard/stores">Durable Redis</a></p><blockquote><p><strong>注：</strong></p><p>jumpurl为该节点的对外访问地址</p><p>apiurl 为“副服务器”的对外访问地址</p><p>backupurl 为“图床服务器“的对外访问地址</p><p>mainurl 为“主服务器“的对外访问地址</p></blockquote><div class="tag-plugin tabs" align="center"id="tab_4"><div class="nav-tabs"><div class="tab active"><a href="#tab_4-1">PHP版本</a></div><div class="tab"><a href="#tab_4-2">Python版本</a></div><div class="tab"><a href="#tab_4-3">解析</a></div></div><div class="tab-content"><div class="tab-pane active" id="tab_4-1"><blockquote><p>需要修改redis连接地址，$user_token和$mainurl</p></blockquote><p>Code:</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 连接 Redis 服务器</span></span><br><span class="line"><span class="variable">$redis</span> = <span class="keyword">new</span> <span class="title class_">Redis</span>();</span><br><span class="line"><span class="variable">$redis</span>-&gt;<span class="title function_ invoke__">connect</span>(<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="number">6379</span>);</span><br><span class="line"><span class="variable">$redis</span>-&gt;<span class="title function_ invoke__">select</span>(<span class="number">2</span>);</span><br><span class="line"><span class="comment">//token</span></span><br><span class="line"><span class="variable">$user_token</span> = <span class="string">&quot;yourtoken&quot;</span>;</span><br><span class="line"><span class="comment">//主服务器url</span></span><br><span class="line"><span class="variable">$mainurl</span> = <span class="string">&quot;https://yourdomain.top/api/raw/?path=/&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义限制器类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Limiter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$limits</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$key_func</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$requests</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$key_func</span>, <span class="variable">$default_limits</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;limits = <span class="variable">$default_limits</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;key_func = <span class="variable">$key_func</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;requests = <span class="keyword">array</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">limit</span>(<span class="params"><span class="variable">$route</span>, <span class="variable">$limit</span></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">isset</span>(<span class="variable language_">$this</span>-&gt;requests[<span class="variable">$route</span>])) &#123;</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;requests[<span class="variable">$route</span>] = <span class="keyword">array</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$key</span> = <span class="title function_ invoke__">call_user_func</span>(<span class="variable">$this</span>-&gt;key_func);</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">isset</span>(<span class="variable language_">$this</span>-&gt;requests[<span class="variable">$route</span>][<span class="variable">$key</span>])) &#123;</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;requests[<span class="variable">$route</span>][<span class="variable">$key</span>] = <span class="keyword">array</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_ invoke__">array_push</span>(<span class="variable">$this</span>-&gt;requests[<span class="variable">$route</span>][<span class="variable">$key</span>], <span class="title function_ invoke__">time</span>());</span><br><span class="line">        <span class="keyword">while</span> (<span class="title function_ invoke__">count</span>(<span class="variable">$this</span>-&gt;requests[<span class="variable">$route</span>][<span class="variable">$key</span>]) &gt; <span class="number">0</span> &amp;&amp; <span class="title function_ invoke__">time</span>() - <span class="variable language_">$this</span>-&gt;requests[<span class="variable">$route</span>][<span class="variable">$key</span>][<span class="number">0</span>] &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="title function_ invoke__">array_shift</span>(<span class="variable">$this</span>-&gt;requests[<span class="variable">$route</span>][<span class="variable">$key</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_ invoke__">count</span>(<span class="variable">$this</span>-&gt;requests[<span class="variable">$route</span>][<span class="variable">$key</span>]) &gt; <span class="variable">$limit</span>) &#123;</span><br><span class="line">            <span class="title function_ invoke__">http_response_code</span>(<span class="number">429</span>);</span><br><span class="line">            <span class="keyword">die</span>(<span class="string">&#x27;Too Many Requests&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义获取客户端 IP 地址的函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_remote_address</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$_SERVER</span>[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化限制器</span></span><br><span class="line"><span class="variable">$limiter</span> = <span class="keyword">new</span> <span class="title class_">Limiter</span>(<span class="string">&#x27;get_remote_address&#x27;</span>, <span class="keyword">array</span>(<span class="string">&#x27;40 per second&#x27;</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义 update 路由</span></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_METHOD&#x27;</span>] === <span class="string">&#x27;POST&#x27;</span> &amp;&amp; <span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_URI&#x27;</span>] === <span class="string">&#x27;/_api/update&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// 检查请求速率</span></span><br><span class="line">    <span class="variable">$limiter</span>-&gt;<span class="title function_ invoke__">limit</span>(<span class="string">&#x27;/_api/update&#x27;</span>, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取请求参数</span></span><br><span class="line">    <span class="variable">$json</span> = <span class="title function_ invoke__">json_decode</span>(<span class="title function_ invoke__">file_get_contents</span>(<span class="string">&#x27;php://input&#x27;</span>), <span class="literal">true</span>);</span><br><span class="line">    <span class="variable">$token</span> = <span class="keyword">isset</span>(<span class="variable">$json</span>[<span class="string">&#x27;token&#x27;</span>]) ? <span class="variable">$json</span>[<span class="string">&#x27;token&#x27;</span>] : <span class="literal">null</span>;</span><br><span class="line">    <span class="variable">$server_id</span> = <span class="keyword">isset</span>(<span class="variable">$json</span>[<span class="string">&#x27;server_id&#x27;</span>]) ? <span class="variable">$json</span>[<span class="string">&#x27;server_id&#x27;</span>] : <span class="literal">null</span>;</span><br><span class="line">    <span class="variable">$url</span> = <span class="keyword">isset</span>(<span class="variable">$json</span>[<span class="string">&#x27;url&#x27;</span>]) ? <span class="variable">$json</span>[<span class="string">&#x27;url&#x27;</span>] : <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 检查参数完整性</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable">$token</span> || !<span class="variable">$server_id</span> || !<span class="variable">$url</span>) &#123;</span><br><span class="line">        <span class="title function_ invoke__">http_response_code</span>(<span class="number">400</span>);</span><br><span class="line">        <span class="keyword">die</span>(<span class="title function_ invoke__">json_encode</span>(<span class="keyword">array</span>(<span class="string">&#x27;code&#x27;</span> =&gt; <span class="number">1002</span>, <span class="string">&#x27;msg&#x27;</span> =&gt; <span class="string">&#x27;Missing required parameters.&#x27;</span>)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 检查 token 是否有效</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$token</span> !== <span class="variable">$user_token</span>) &#123;</span><br><span class="line">        <span class="title function_ invoke__">http_response_code</span>(<span class="number">400</span>);</span><br><span class="line">        <span class="keyword">die</span>(<span class="title function_ invoke__">json_encode</span>(<span class="keyword">array</span>(<span class="string">&#x27;code&#x27;</span> =&gt; <span class="number">1002</span>, <span class="string">&#x27;msg&#x27;</span> =&gt; <span class="string">&#x27;Invalid token.&#x27;</span>)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 更新服务器信息</span></span><br><span class="line">    <span class="variable">$redis</span>-&gt;<span class="title function_ invoke__">setEx</span>(<span class="string">&quot;jump_<span class="subst">$server_id</span>&quot;</span>, <span class="number">1200</span>, <span class="variable">$url</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 返回成功消息</span></span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-Type: application/json&#x27;</span>);</span><br><span class="line">    <span class="keyword">echo</span> <span class="title function_ invoke__">json_encode</span>(<span class="keyword">array</span>(<span class="string">&#x27;code&#x27;</span> =&gt; <span class="number">0</span>, <span class="string">&#x27;msg&#x27;</span> =&gt; <span class="string">&#x27;ok&#x27;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义 jump 路由</span></span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_METHOD&#x27;</span>] === <span class="string">&#x27;GET&#x27;</span> &amp;&amp; <span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/^\/(.+)$/&#x27;</span>, <span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_URI&#x27;</span>], <span class="variable">$matches</span>)) &#123;</span><br><span class="line">    <span class="comment">// 检查请求速率</span></span><br><span class="line">    <span class="variable">$limiter</span>-&gt;<span class="title function_ invoke__">limit</span>(<span class="string">&#x27;/&lt;path:url&gt;&#x27;</span>, <span class="number">40</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取客户端请求的 URL</span></span><br><span class="line">    <span class="variable">$url</span> = <span class="variable">$matches</span>[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 从 Redis 中读取数据</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">1</span>; <span class="variable">$i</span> &lt;= <span class="number">5</span>; ++<span class="variable">$i</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable">$redis</span>-&gt;<span class="title function_ invoke__">exists</span>(<span class="string">&quot;jump_<span class="subst">$i</span>&quot;</span>)) &#123;</span><br><span class="line">            <span class="variable">$orig_url</span> = <span class="variable">$redis</span>-&gt;<span class="title function_ invoke__">get</span>(<span class="string">&quot;jump_<span class="subst">$i</span>&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果未找到数据，则使用默认的原始 URL</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">isset</span>(<span class="variable">$orig_url</span>)) &#123;</span><br><span class="line">        <span class="variable">$orig_url</span> = <span class="variable">$mainurl</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 拼接 URL 并重定向客户端</span></span><br><span class="line">    <span class="title function_ invoke__">header</span>(<span class="string">&#x27;Location: &#x27;</span> . (<span class="variable">$orig_url</span> . <span class="title function_ invoke__">urlencode</span>(<span class="variable">$url</span>)));</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>伪静态配置:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">location</span> / &#123;</span><br><span class="line">    <span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ /index.php?<span class="variable">$args</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="tab_4-2"><p>Code:</p><blockquote><p>需要修改redis连接地址，user_token和mainurl</p></blockquote><p>安装依赖：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install flask flask_limiter hypercorn flask_cors</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, jsonify, request, redirect</span><br><span class="line"><span class="keyword">from</span> flask_limiter <span class="keyword">import</span> Limiter</span><br><span class="line"><span class="keyword">from</span> flask_limiter.util <span class="keyword">import</span> get_remote_address</span><br><span class="line"><span class="keyword">import</span> redis</span><br><span class="line"><span class="keyword">from</span> hypercorn.asyncio <span class="keyword">import</span> serve</span><br><span class="line"><span class="keyword">from</span> hypercorn.config <span class="keyword">import</span> Config</span><br><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"></span><br><span class="line">limiter = Limiter(</span><br><span class="line">    key_func=get_remote_address,</span><br><span class="line">    default_limits=[<span class="string">&quot;20 per second&quot;</span>],</span><br><span class="line">    storage_uri=<span class="string">&#x27;redis://localhost:6379&#x27;</span></span><br><span class="line">)</span><br><span class="line">config = Config()</span><br><span class="line"><span class="comment">#配置区</span></span><br><span class="line">redis_client = redis.Redis(host=<span class="string">&#x27;localhost&#x27;</span>, port=<span class="number">6379</span>, db=<span class="number">2</span>)</span><br><span class="line">mainurl = <span class="string">&quot;https://yourdomain.top/api/raw/?path=/&quot;</span></span><br><span class="line">user_token = <span class="string">&quot;user_token&quot;</span> <span class="comment">#双端保持一致</span></span><br><span class="line">config.bind = [<span class="string">&quot;0.0.0.0:56789&quot;</span>] <span class="comment">#可自行修改端口号</span></span><br><span class="line">config.protocol = <span class="string">&quot;h2&quot;</span>  <span class="comment"># 启用HTTP2</span></span><br><span class="line"><span class="comment">#注意需要替换为你的证书路径</span></span><br><span class="line">config.certfile = <span class="string">&quot;./pem.pem&quot;</span></span><br><span class="line">config.keyfile = <span class="string">&quot;./key.key&quot;</span></span><br><span class="line"><span class="comment">#访问日志</span></span><br><span class="line">config.accesslog = <span class="string">&quot;access.log&quot;</span></span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">limiter.init_app(app)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/_api/update&#x27;</span>, methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="meta">@limiter.limit(<span class="params"><span class="string">&quot;5 per second&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">update</span>():</span><br><span class="line">    token = request.json.get(<span class="string">&#x27;token&#x27;</span>)</span><br><span class="line">    server_id = request.json.get(<span class="string">&#x27;server_id&#x27;</span>)</span><br><span class="line">    url = request.json.get(<span class="string">&#x27;url&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> token <span class="keyword">or</span> <span class="keyword">not</span> url <span class="keyword">or</span> <span class="keyword">not</span> server_id:</span><br><span class="line">        <span class="keyword">return</span> jsonify(&#123;<span class="string">&#x27;code&#x27;</span>:<span class="number">1002</span>,<span class="string">&#x27;msg&#x27;</span>: <span class="string">&#x27;Missing required parameters.&#x27;</span>&#125;), <span class="number">400</span></span><br><span class="line">    <span class="keyword">if</span> token != user_token:</span><br><span class="line">        <span class="keyword">return</span> jsonify(&#123;<span class="string">&#x27;code&#x27;</span>:<span class="number">1002</span>,<span class="string">&#x27;msg&#x27;</span>: <span class="string">&#x27;Invalid token.&#x27;</span>&#125;), <span class="number">400</span></span><br><span class="line">    <span class="built_in">print</span>(server_id)</span><br><span class="line">    key = <span class="string">f&#x27;jump_<span class="subst">&#123;server_id&#125;</span>&#x27;</span></span><br><span class="line">    redis_client.setex(key, <span class="number">1200</span>, url)</span><br><span class="line">    <span class="keyword">return</span> jsonify(&#123;<span class="string">&#x27;code&#x27;</span>:<span class="number">0</span>,<span class="string">&#x27;msg&#x27;</span>: <span class="string">&#x27;ok&#x27;</span>&#125;), <span class="number">200</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&lt;path:url&gt;&#x27;</span></span>)</span></span><br><span class="line"><span class="meta">@limiter.limit(<span class="params"><span class="string">&quot;30 per second&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">jump</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">6</span>):</span><br><span class="line">        <span class="comment"># 从Redis中读取数据</span></span><br><span class="line">        orig_url = <span class="literal">None</span></span><br><span class="line">        value = redis_client.get(<span class="string">f&#x27;jump_<span class="subst">&#123;i&#125;</span>&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> value:</span><br><span class="line">            orig_url = value.decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> orig_url:</span><br><span class="line">        orig_url = mainurl</span><br><span class="line">    backurl = orig_url + url</span><br><span class="line">    <span class="keyword">return</span> redirect(backurl)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment">#app.run(debug=True)</span></span><br><span class="line">    <span class="comment">#app.run()</span></span><br><span class="line">    asyncio.run(serve(app, config))</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="tab_4-3"><p>运行逻辑：</p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/08/02/64ca059284ed4.webp" alt="image-20230802152803639" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20230802152803639</span></div></div><pre class="mermaid">flowchart TDid0([访问]) --> id1["判断路径是否为'/_api/update'"]id1 --> |是| id2["读取相关数据计入redis"]id1 --> |否| id3["设初始值为n(n₀=1,<6)，读取redis中'jump_n'"]id3 --> |值不存在| id4["n+1"]id4 --> id3id3 ---> |值存在| id5["读取相应值，与访问路径拼接后重定向"]id3 ---> |值均不存在| id6["将'主服务器'地址与访问路径拼接后重定向"]</pre><ol><li>接受服务器状态：相比于主动检测，被动式显然更简单。通过向<code>/_api/update</code>发送<code>POST</code>请求(json)，内容包括<code>token,server_id,url</code>，server_id是阿拉伯数字，url是节点的对外访问地址，将存入redis中，20分钟过期</li><li><code>/*</code>の跳转：在请求图片时，会把1-5的数字往挨个请求[如果有更多节点可以更改]，如果有值，则取该值与访问地址拼接后，返回重定向请求。如果无节点在线，则将主服务器地址与访问地址拼接再返回。</li><li>均有访问速率限制，防止被人打到爆炸，可以根据实际情况调节上限。</li></ol></div></div></div><p>在搭建完成后，测试访问之前上传的图片，如果能返回图片即ok</p><h3 id="节点"><a href="#节点" class="headerlink" title="节点"></a>节点</h3><p>考虑到php部署起来麻烦，这里用python解决一切</p><div class="tag-plugin tabs" align="center"id="tab_5"><div class="nav-tabs"><div class="tab active"><a href="#tab_5-1">Python</a></div><div class="tab"><a href="#tab_5-2">解析</a></div></div><div class="tab-content"><div class="tab-pane active" id="tab_5-1"><p>下载数据库到程序同目录：<a href="https://raw.hzchu.top/thun888/MNSLXOD/main/node/data.db">[点击下载]</a></p><p>安装依赖：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install flask flask_limiter hypercorn flask_cors</span><br></pre></td></tr></table></figure><p>Code:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, jsonify, send_file, request</span><br><span class="line"><span class="keyword">from</span> flask_limiter <span class="keyword">import</span> Limiter</span><br><span class="line"><span class="keyword">from</span> flask_limiter.util <span class="keyword">import</span> get_remote_address</span><br><span class="line"><span class="keyword">import</span> sqlite3</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> hypercorn.asyncio <span class="keyword">import</span> serve</span><br><span class="line"><span class="keyword">from</span> hypercorn.config <span class="keyword">import</span> Config</span><br><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"></span><br><span class="line">limiter = Limiter(</span><br><span class="line">    key_func=get_remote_address,</span><br><span class="line">    default_limits=[<span class="string">&quot;40 per second&quot;</span>],</span><br><span class="line">    storage_uri=<span class="string">&#x27;redis://localhost:6379&#x27;</span></span><br><span class="line">)</span><br><span class="line">config = Config()</span><br><span class="line"><span class="comment">###配置区###</span></span><br><span class="line">config.bind = [<span class="string">&quot;0.0.0.0:45678&quot;</span>]  <span class="comment"># 自行更改端口</span></span><br><span class="line">config.protocol = <span class="string">&quot;h2&quot;</span>  <span class="comment"># 启用HTTP2</span></span><br><span class="line"><span class="comment">#注意需要替换为你的证书路径，不用就连带下面两行注释掉</span></span><br><span class="line">config.certfile = <span class="string">&quot;./pem.pem&quot;</span></span><br><span class="line">config.keyfile = <span class="string">&quot;./key.key&quot;</span></span><br><span class="line"><span class="comment">#访问日志目录</span></span><br><span class="line">config.accesslog = <span class="string">&quot;access.log&quot;</span></span><br><span class="line">server_id = <span class="number">1</span></span><br><span class="line">mainurl = <span class="string">&quot;https://yuordomain.top/api/raw/?path=/&quot;</span></span><br><span class="line">jumpurl = <span class="string">&quot;https://jumpurl/&quot;</span></span><br><span class="line">apiurl = <span class="string">&quot;http://apiurl/&quot;</span></span><br><span class="line">backupurl = <span class="string">&quot;http://backupurl/&quot;</span></span><br><span class="line">token = <span class="string">&quot;token&quot;</span></span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line">limiter.init_app(app)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">savetodatabase</span>(<span class="params">nowtime,outdata,indata</span>):</span><br><span class="line">    conn = sqlite3.connect(<span class="string">&#x27;data.db&#x27;</span>)</span><br><span class="line">    cursor_daily = conn.cursor()</span><br><span class="line">    cursor_daily.execute(<span class="string">&quot;SELECT COUNT(*) FROM daily WHERE date=?&quot;</span>, (nowtime,))</span><br><span class="line">    <span class="keyword">if</span> cursor_daily.fetchone()[<span class="number">0</span>] == <span class="number">0</span>:</span><br><span class="line">        cursor_daily.execute(<span class="string">&quot;INSERT INTO daily (date, get, traffic_out, traffic_in) VALUES (?, ?, ?, ?)&quot;</span>, (nowtime, <span class="number">1</span>, outdata, indata))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        cursor_daily.execute(<span class="string">&quot;UPDATE daily SET traffic_out = traffic_out + ?, get = get + ?, traffic_in = traffic_in + ? WHERE date=?&quot;</span>, (outdata, <span class="number">1</span>, indata, nowtime))</span><br><span class="line"></span><br><span class="line">    cursor_total = conn.cursor()</span><br><span class="line">    cursor_total.execute(<span class="string">&quot;UPDATE total SET traffic_out = traffic_out + ?, get = get + ?, traffic_in = traffic_in + ?&quot;</span>, (outdata, <span class="number">1</span>, indata))</span><br><span class="line">    conn.commit()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/_api/status&#x27;</span></span>)</span></span><br><span class="line"><span class="meta">@limiter.limit(<span class="params"><span class="string">&quot;1 per second&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_status</span>():</span><br><span class="line">    uptime = <span class="built_in">str</span>(datetime.datetime.now() - start_time)</span><br><span class="line">    conn = sqlite3.connect(<span class="string">&#x27;data.db&#x27;</span>)</span><br><span class="line">    cursor = conn.cursor()</span><br><span class="line">    cursor.execute(<span class="string">&quot;SELECT get,traffic_in,traffic_out FROM total&quot;</span>)</span><br><span class="line">    result = cursor.fetchone()</span><br><span class="line">    get = result[<span class="number">0</span>]</span><br><span class="line">    traffic_in = result[<span class="number">1</span>]</span><br><span class="line">    traffic_out = result[<span class="number">2</span>]</span><br><span class="line">    <span class="comment"># 构造状态信息</span></span><br><span class="line">    status = &#123;</span><br><span class="line">        <span class="string">&#x27;server_id&#x27;</span>: server_id,</span><br><span class="line">        <span class="string">&#x27;uptime&#x27;</span>: uptime,</span><br><span class="line">        <span class="string">&#x27;traffic_out&#x27;</span>: traffic_out,</span><br><span class="line">        <span class="string">&#x27;traffic_in&#x27;</span>: traffic_in,</span><br><span class="line">        <span class="string">&#x27;get&#x27;</span>: get</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> jsonify(status)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/_api/traffic&#x27;</span></span>)</span></span><br><span class="line"><span class="meta">@limiter.limit(<span class="params"><span class="string">&quot;1 per second&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_traffic_daily</span>():</span><br><span class="line">    conn = sqlite3.connect(<span class="string">&#x27;data.db&#x27;</span>)</span><br><span class="line">    cursor = conn.cursor()</span><br><span class="line"></span><br><span class="line">    cursor.execute(<span class="string">&#x27;SELECT * FROM &quot;daily&quot; ORDER BY &quot;date&quot; DESC LIMIT 0,14&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    rows = cursor.fetchall()</span><br><span class="line">    cursor.close()</span><br><span class="line">    conn.close()</span><br><span class="line"></span><br><span class="line">    data = []</span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> rows:</span><br><span class="line">        data.append(&#123;</span><br><span class="line">            <span class="string">&#x27;date&#x27;</span>: row[<span class="number">0</span>],</span><br><span class="line">            <span class="string">&#x27;traffic_out&#x27;</span>: row[<span class="number">3</span>],</span><br><span class="line">            <span class="string">&#x27;traffic_in&#x27;</span>: row[<span class="number">2</span>]</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> jsonify(data)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/_api/cache_clean&#x27;</span></span>)</span></span><br><span class="line"><span class="meta">@limiter.limit(<span class="params"><span class="string">&quot;1 per second&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">cache_clean</span>():</span><br><span class="line">    day = <span class="built_in">int</span>(request.args.get(<span class="string">&#x27;day&#x27;</span>, <span class="number">1</span>))</span><br><span class="line">    size = clear_old_files(<span class="number">0</span>)</span><br><span class="line">    status = &#123;</span><br><span class="line">        <span class="string">&#x27;size&#x27;</span>: size,</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> jsonify(status)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&lt;path:url&gt;&#x27;</span></span>)</span></span><br><span class="line"><span class="meta">@limiter.limit(<span class="params"><span class="string">&quot;40 per second&quot;</span></span>)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download_file</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="comment">#print(url)</span></span><br><span class="line">    <span class="keyword">if</span> url == <span class="string">&quot;favicon.ico&quot;</span>:</span><br><span class="line">        url = <span class="string">&quot;mount/pic/favicon.webp&quot;</span></span><br><span class="line">    cache_path = os.path.join(<span class="string">&#x27;tmp&#x27;</span>, url)</span><br><span class="line">    nowtime = datetime.datetime.now().strftime(<span class="string">&quot;%Y-%m-%d&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> os.path.exists(cache_path):</span><br><span class="line">        file_size = os.path.getsize(cache_path)</span><br><span class="line">        savetodatabase(nowtime,file_size,<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> send_file(cache_path)</span><br><span class="line"></span><br><span class="line">    primary_url = mainurl + url</span><br><span class="line">    response = requests.get(primary_url, allow_redirects=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            os.makedirs(os.path.dirname(cache_path))</span><br><span class="line">        <span class="keyword">except</span> OSError:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(cache_path, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(response.content)</span><br><span class="line"></span><br><span class="line">        file_size = os.path.getsize(cache_path)</span><br><span class="line">        savetodatabase(nowtime,file_size,file_size)</span><br><span class="line">        <span class="keyword">return</span> send_file(cache_path)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;从原站获取&quot;</span>+url)</span><br><span class="line">    secondary_url = backupurl + url</span><br><span class="line">    response = requests.get(secondary_url, allow_redirects=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            os.makedirs(os.path.dirname(cache_path))</span><br><span class="line">        <span class="keyword">except</span> OSError:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(cache_path, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(response.content)</span><br><span class="line"></span><br><span class="line">        file_size = os.path.getsize(cache_path)</span><br><span class="line">        savetodatabase(nowtime,file_size,file_size)</span><br><span class="line">        <span class="keyword">return</span> send_file(cache_path)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        error_msg = <span class="string">&#x27;Failed to download file. URLs: %s&#x27;</span> % (primary_url)</span><br><span class="line">        app.logger.error(error_msg)</span><br><span class="line">        <span class="keyword">return</span> jsonify(&#123;<span class="string">&#x27;error&#x27;</span>: error_msg&#125;), <span class="number">404</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_directory_size</span>(<span class="params">path</span>):</span><br><span class="line">    total_size = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> dirpath, dirnames, filenames <span class="keyword">in</span> os.walk(path):</span><br><span class="line">        <span class="keyword">for</span> filename <span class="keyword">in</span> filenames:</span><br><span class="line">            file_path = os.path.join(dirpath, filename)</span><br><span class="line">            total_size += os.path.getsize(file_path)</span><br><span class="line">    <span class="keyword">return</span> total_size</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">clear_old_files</span>(<span class="params">days</span>):</span><br><span class="line">    total_deleted_size = <span class="number">0</span>  <span class="comment"># 用于记录删除文件的总大小</span></span><br><span class="line">    <span class="comment"># 获取当前时间</span></span><br><span class="line">    current_time = datetime.datetime.now()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 计算1天前的时间</span></span><br><span class="line">    one_day_ago = current_time - datetime.timedelta(days=days)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 遍历目录中的所有文件</span></span><br><span class="line">    <span class="keyword">for</span> root, dirs, files <span class="keyword">in</span> os.walk(current_directory):</span><br><span class="line">        <span class="keyword">for</span> file <span class="keyword">in</span> files:</span><br><span class="line">            file_path = os.path.join(root, file)</span><br><span class="line"></span><br><span class="line">            modification_time = datetime.datetime.fromtimestamp(os.path.getmtime(file_path))</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 如果文件的修改时间早于1天前的时间，则删除文件</span></span><br><span class="line">            <span class="keyword">if</span> modification_time &lt; one_day_ago:</span><br><span class="line">                file_size = os.path.getsize(file_path)  <span class="comment"># 获取文件大小</span></span><br><span class="line">                total_deleted_size += file_size  <span class="comment"># 累加删除文件的大小</span></span><br><span class="line">                os.remove(file_path)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> total_deleted_size</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">delcache</span>():</span><br><span class="line">    size = get_directory_size(current_directory)</span><br><span class="line">    <span class="keyword">if</span> size &gt; <span class="number">5368709120</span>:</span><br><span class="line">        clear_old_files(<span class="number">10</span>)                       </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">update</span>():</span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&quot;token&quot;</span>: token,</span><br><span class="line">        <span class="string">&quot;server_id&quot;</span>: server_id, </span><br><span class="line">        <span class="string">&quot;url&quot;</span>: jumpurl </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 定义目标网址</span></span><br><span class="line">    target_url = apiurl + <span class="string">&quot;_api/update&quot;</span></span><br><span class="line">    <span class="comment"># 发送post请求，并获取响应</span></span><br><span class="line">    response = requests.post(target_url, json=data)       </span><br><span class="line">    <span class="keyword">return</span> response                      </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run_timer</span>():</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:                                                                                                                                                                              </span><br><span class="line">        <span class="comment"># 每15分钟执行一次</span></span><br><span class="line">        time.sleep(<span class="number">15</span> * <span class="number">60</span>)</span><br><span class="line">        threading.Thread(target=delcache).start()</span><br><span class="line">        threading.Thread(target=update).start()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    start_time = datetime.datetime.now()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">&#x27;tmp&#x27;</span>):</span><br><span class="line">        os.mkdir(<span class="string">&#x27;tmp&#x27;</span>)</span><br><span class="line">    current_directory = os.path.join(os.getcwd(), <span class="string">&#x27;tmp&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;缓存目录为:&quot;</span>,current_directory)</span><br><span class="line">    update()</span><br><span class="line">    <span class="comment">#print(start_time)</span></span><br><span class="line">    timer_thread = threading.Thread(target=run_timer)</span><br><span class="line">    timer_thread.daemon = <span class="literal">True</span></span><br><span class="line">    timer_thread.start()</span><br><span class="line">    <span class="comment"># app.run(debug=True,host=&#x27;0.0.0.0&#x27;)</span></span><br><span class="line">    <span class="comment"># app.run(host=&#x27;0.0.0.0&#x27;)</span></span><br><span class="line">    asyncio.run(serve(app, config))  <span class="comment"># 启动服务器</span></span><br></pre></td></tr></table></figure><blockquote><p>节点附带了两个简易api用于查看该节点运行情况</p><p>实际部署中可能需要自行配置ssl证书以使开启了https的网站可以正常访问</p><p>如果外部不套反向代理建议自定义10000-65535的端口</p><p>进程同样需要持久化，可以参考rclone部分</p></blockquote></div><div class="tab-pane" id="tab_5-2"><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/08/02/64ca3aef2cf43.webp" fancybox="true"/></div></div><pre class="mermaid">flowchart TD    id0([访问]) --> id1["判断路径是否为'/_api/...'"]    id1 --> |是| id2["读取相关数据返回"]    id1 --> |否| id3["检查本地有无对应文件缓存"]    id3 ---> |文件存在| id4["读取文件返回"]    id3 ---> |文件不存在| id5["将'主服务器'地址与访问路径拼接后请求，下载文件后返回"]    id6(["定时器（15min）"]) --> id7(["清理缓存"]) --> id8["检查缓存目录大小"] --> |>5GB| id9["清理一天前缓存"]    id8 --> |"≦5GB"| id10["不动作"]    id6 --> id11(["上报服务器消息"])</pre></div></div></div><h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><div class="tag-plugin tabs" align="center"id="tab_6"><div class="nav-tabs"><div class="tab active"><a href="#tab_6-1">直接访问OneDrive目录程序</a></div><div class="tab"><a href="#tab_6-2">正常访问效果</a></div><div class="tab"><a href="#tab_6-3">直接访问家宽节点</a></div></div><div class="tab-content"><div class="tab-pane active" id="tab_6-1"><p>低并发</p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/08/01/64c85bab42978.webp" alt="1690852265630.webp" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">1690852265630.webp</span></div></div><p>高并发</p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/08/01/64c85bceda8cc.webp" alt="1690852301797.webp" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">1690852301797.webp</span></div></div></div><div class="tab-pane" id="tab_6-2"><p>低并发</p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/08/01/64c85ada80fe5.webp" fancybox="true"/></div></div><p>高并发</p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/08/02/64ca4417e3b0d.webp" fancybox="true"/></div></div></div><div class="tab-pane" id="tab_6-3"><p>低并发</p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/07/31/64c7c747d041a.webp" fancybox="true"/></div></div><p>高并发</p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/08/02/64ca523d745c7.webp" fancybox="true"/></div></div></div></div></div><h3 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h3><p>对应这个项目，我感觉就是：<code>易上手，易扩展</code>，同时可以薅到各大厂商的羊毛（怎么薅就看各位的了），既可以把一些不稳定的服务利用起来，又不用担心出问题时全部拉闸。并且背靠微软不用担心无良厂商跑路数据丢失。</p><p>而关于利用国内宽带提供网络服务的问题，我想联通与其抓我这1个月200MB上传的小服务，不如去抓那些狗大户，更重要的是图床时自用的，不用担心因为违法色情的图片被请去喝茶。</p><p>该项目也可以用在别的地方，自行发挥啦<span class="tag-plugin emoji"><img no-lazy="" class="inline" src="https://jsd.hzchu.top/gh/norevi/waline-blobcatemojis@1.0/blobs/ablobcatattentionreverse.png"/></span></p><p>项目开源地址：</p><div class="tag-plugin ghcard"><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/thun888/MNSLXOD"><img src="https://github-readme-stats.xaoxuu.com/api/pin/?username=thun888&repo=MNSLXOD&theme=dark&show_owner=true"/></a></div><p>ps：</p><p>从4月份到现在为od节省了17倍的数据</p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/08/02/64ca32eb1fac5.webp" alt="image-20230802183846133.webp" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20230802183846133.webp</span></div></div><p>从4月份到现在的日志</p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/07/31/64c72c298f397.webp" fancybox="true"/></div></div><p>共480多条，大多数都是爬虫的贡献</p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;p&gt;一直以来，我都在尝试各种图片存储方案，一开始便是经典的Github+jsd，但考虑到违反了tos后面就用了cf+b2，但速度不尽人意。后来用了vercel反代gh和一些杂七杂八的，但换汤不换药嘛，还是不靠谱。&lt;/p&gt;</summary>
    
    
    
    
    <category term="MNSLXOD" scheme="https://blog.hzchu.top/tags/MNSLXOD/"/>
    
  </entry>
  
  <entry>
    <title>Windows下的电源计划自动控制</title>
    <link href="https://blog.hzchu.top/2023/auto-control-power-plan/"/>
    <id>https://blog.hzchu.top/2023/auto-control-power-plan/</id>
    <published>2023-01-17T19:07:20.000Z</published>
    <updated>2023-01-17T19:38:20.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="代码部分"><a href="#代码部分" class="headerlink" title="代码部分"></a>代码部分</h3><p>之前搞了一套E5扔在角落里吃灰，这几天想起来准备当nas用。不过在最高频率下运行功率实在恐怖（140w+），在Windows下限制CPU频率最简单的就是电源计划了，话不多说<span class="tag-plugin emoji"><img no-lazy="" class="inline" src="https://jsd.hzchu.top/gh/norevi/waline-blobcatemojis@1.0/blobs/ablobcatattentionreverse.png"/></span></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> psutil</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">BALANCE=<span class="string">&#x27;381b4222-f694-41f0-9685-ff5bb260df2e&#x27;</span></span><br><span class="line">HIGH_PERFORMANCE=<span class="string">&#x27;8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c&#x27;</span></span><br><span class="line">ENERGY_SAVER=<span class="string">&#x27;a1841308-3541-4fab-bc81-f71556f20b4a&#x27;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">change_power_plan</span>(<span class="params">plan</span>):</span><br><span class="line">    subprocess.run(<span class="string">f&#x27;powercfg /S <span class="subst">&#123;plan&#125;</span>&#x27;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_power_plan</span>():</span><br><span class="line">    output = subprocess.run(<span class="string">&quot;powercfg /GETACTIVESCHEME&quot;</span>, shell=<span class="literal">True</span>, stdout=subprocess.PIPE).stdout.decode(<span class="string">&quot;GBK&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> output.split(<span class="string">&quot; &quot;</span>)[-<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    cpu_percent = psutil.cpu_percent(interval=<span class="number">1</span>)</span><br><span class="line">    current_time = time.localtime().tm_hour</span><br><span class="line">    plan = get_power_plan()</span><br><span class="line">    <span class="comment">#print(plan)</span></span><br><span class="line">    <span class="keyword">if</span> current_time &gt;= <span class="number">23</span> <span class="keyword">or</span> current_time &lt;= <span class="number">6</span>:</span><br><span class="line">        <span class="keyword">if</span> plan != ENERGY_SAVER:</span><br><span class="line">            <span class="built_in">print</span>(current_time+<span class="string">&quot;：切换到节能模式&quot;</span>)</span><br><span class="line">            change_power_plan(ENERGY_SAVER)</span><br><span class="line">    <span class="keyword">elif</span> cpu_percent &gt; <span class="number">90</span>:</span><br><span class="line">        <span class="keyword">if</span> plan != HIGH_PERFORMANCE:</span><br><span class="line">            <span class="built_in">print</span>(current_time+<span class="string">&quot;：切换到高性能模式&quot;</span>)</span><br><span class="line">            change_power_plan(HIGH_PERFORMANCE)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">if</span> plan != BALANCE:</span><br><span class="line">            <span class="built_in">print</span>(current_time+<span class="string">&quot;：切换到平衡模式&quot;</span>)</span><br><span class="line">            change_power_plan(BALANCE)</span><br><span class="line">    time.sleep(<span class="number">60</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>其中，这一部分需要自己获取</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">BALANCE=<span class="string">&#x27;381b4222-f694-41f0-9685-ff5bb260df2e&#x27;</span></span><br><span class="line">HIGH_PERFORMANCE=<span class="string">&#x27;8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c&#x27;</span></span><br><span class="line">ENERGY_SAVER=<span class="string">&#x27;a1841308-3541-4fab-bc81-f71556f20b4a&#x27;</span></span><br></pre></td></tr></table></figure><p>使用<code>powercfg /GETACTIVESCHEME</code>获取电源计划GUID并填入</p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/01/17/63c685e3ca534.webp" alt="image-20230117191532293" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20230117191532293</span></div></div><p>当时间晚于11点或早于6点时，设置为节能</p><p>当CPU占用大于90时，调为高性能</p><p>其余时间为平衡</p><h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><p>为了演示，这里将时间间隔调整为1s</p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/01/17/63c6873160cb1.gif" alt="1113.gif" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">1113.gif</span></div></div><p>有负载时</p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/01/17/63c6873d0f2cb.gif" alt="1114.gif" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">1114.gif</span></div></div><p>PS：电源计划中限制频率的方法</p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2023/01/17/63c687e21db58.webp" alt="1673955297733.webp" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">1673955297733.webp</span></div></div>]]></content>
    
    
    <summary type="html">之前搞了一套E5扔在角落里吃灰，这几天想起来准备当nas用。不过在最高频率下运行功率实在恐怖（140w+），在Windows下限制CPU频率心理有频率最简单的就是电源计划了</summary>
    
    
    
    
    <category term="Windows" scheme="https://blog.hzchu.top/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>定语从句要点复习（笔记）</title>
    <link href="https://blog.hzchu.top/2022/definite-clause-point-review/"/>
    <id>https://blog.hzchu.top/2022/definite-clause-point-review/</id>
    <published>2022-12-31T17:16:23.000Z</published>
    <updated>2022-12-31T17:16:23.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="要点一：判断"><a href="#要点一：判断" class="headerlink" title="要点一：判断"></a>要点一：判断</h3><p>1.位于名词或者代词之后：</p><p>2.可翻译为“……<mark class="tag-plugin mark" color="orange">的</mark>”；</p><p>3.前后句有重叠部分</p><h3 id="要点二：关系代词和关系副词的选择"><a href="#要点二：关系代词和关系副词的选择" class="headerlink" title="要点二：关系代词和关系副词的选择"></a>要点二：关系代词和关系副词的选择</h3><p>关系代词：that&#x2F;which&#x2F;who&#x2F;whom&#x2F;whose&#x2F;<mark class="tag-plugin mark" color="orange">as</mark></p><p>关系副词：when&#x2F;where&#x2F;why  （&#x3D;介词+which）</p><p>1.成分分析法：</p><p>​定语从句<mark class="tag-plugin mark" color="orange">缺主语或宾语</mark>，用关系<mark class="tag-plugin mark" color="orange">代词</mark>：</p><p>​定语从句<mark class="tag-plugin mark" color="orange">完整</mark>，<mark class="tag-plugin mark" color="orange">不缺主宾</mark>，用关系<mark class="tag-plugin mark" color="orange">副词</mark>。</p><ol start="2"><li>代入法：</li></ol><p>​将先行词代入到定语从句中，若<mark class="tag-plugin mark" color="orange">刚好完整</mark>用关系<mark class="tag-plugin mark" color="orange">代词</mark>；</p><p>​若<mark class="tag-plugin mark" color="orange">需要补充介词才完整</mark>，则用关系<mark class="tag-plugin mark" color="orange">副词</mark>;</p><p>有关习题</p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2022/12/31/63afff94ebba3.webp" alt="0d3ac79c-d33e-45b6-a1d8-4a3a4756b270.webp" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">0d3ac79c-d33e-45b6-a1d8-4a3a4756b270.webp</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2022/12/31/63affe4269583.webp" alt="dfc44830-58e2-4fd5-b0db-4e31a063f594.webp" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">dfc44830-58e2-4fd5-b0db-4e31a063f594.webp</span></div></div><h3 id="要点三：that-v-s-which"><a href="#要点三：that-v-s-which" class="headerlink" title="要点三：that v.s which"></a>要点三：that v.s which</h3><p>在<mark class="tag-plugin mark" color="orange">指物</mark>的情况下（毕竟which不能指人），that和which一般是可以互换的，但是以下情况不能互换。</p><h4 id="用that不用which的四种情况："><a href="#用that不用which的四种情况：" class="headerlink" title="用that不用which的四种情况："></a>用that不用which的四种情况：</h4><p>​1.先行词为指物的不定代词或被不定代词修饰：<br>​<br>​2.先行词被最高级或者序数词修饰；<br>​<br>​3.先行词被the very，the only或者just the修饰：<br>​<br>​4.先行词中既有人又有物。</p><h4 id="用which不用that的三种情况："><a href="#用which不用that的三种情况：" class="headerlink" title="用which不用that的三种情况："></a>用which不用that的三种情况：</h4><p>​1.<mark class="tag-plugin mark" color="orange">非限制性</mark>定语从句（<mark class="tag-plugin mark" color="orange">有逗号</mark>）；<br>​<br>​2.以<mark class="tag-plugin mark" color="orange">整个句子</mark>作为先行词（<mark class="tag-plugin mark" color="orange">非限制性</mark>定从）；<br>​<br>​3.<mark class="tag-plugin mark" color="orange">介词</mark>后的关系代词。</p><blockquote><p>多写that</p></blockquote><h3 id="要点四：who-v-s-that"><a href="#要点四：who-v-s-that" class="headerlink" title="要点四：who v.s that"></a>要点四：who v.s that</h3><p>在<mark class="tag-plugin mark" color="orange">指人</mark>的情况下，who和that一般是可以互换的，但是如果<mark class="tag-plugin mark" color="orange">先行词是某些代词</mark>，比如<mark class="tag-plugin mark" color="orange">he,anyone,those</mark>等，这时的关系代词应该<mark class="tag-plugin mark" color="orange">用who</mark>，不用that。</p><mark class="tag-plugin mark" color="green">eg: 谁能笑到最后,才是笑得最好: He who laughs last laughs best.</mark><h3 id="要点五：介词后关系代词的选择"><a href="#要点五：介词后关系代词的选择" class="headerlink" title="要点五：介词后关系代词的选择"></a>要点五：介词后关系代词的选择</h3><p>介词+（指<mark class="tag-plugin mark" color="orange">物</mark>）<mark class="tag-plugin mark" color="orange">which</mark></p><p>介词+（指<mark class="tag-plugin mark" color="orange">人</mark>）<mark class="tag-plugin mark" color="orange">whom</mark></p><blockquote><p>介词后不是加which，就是加whom</p></blockquote><h3 id="要点六：-whose-n"><a href="#要点六：-whose-n" class="headerlink" title="要点六： whose + n.*"></a>要点六： whose + n.*</h3><p>（指<mark class="tag-plugin mark" color="orange">物</mark>）whose+n.&#x3D;<mark class="tag-plugin mark" color="orange">of which</mark> + the + n.&#x3D;the + n. + of which</p><p>（指<mark class="tag-plugin mark" color="orange">人</mark>）whose+n.&#x3D;<mark class="tag-plugin mark" color="orange">of whom</mark> + the + n.&#x3D;the + n. + of whom</p><p>of 可表所属关系，抽象点理解可以得到第二种</p><mark class="tag-plugin mark" color="orange">whose father = the father of whom</mark><mark class="tag-plugin mark" color="orange">若挖空 ------- the n.则不考虑whose</mark><h3 id="要点七：as引导的定语从句"><a href="#要点七：as引导的定语从句" class="headerlink" title="要点七：as引导的定语从句"></a>要点七：as引导的定语从句</h3><mark class="tag-plugin mark" color="orange">**as是关系代词**</mark><h4 id="限制性定语从句："><a href="#限制性定语从句：" class="headerlink" title="限制性定语从句："></a>限制性定语从句：</h4><p>当先行词被<mark class="tag-plugin mark" color="orange">such/so/as/the same</mark>等修饰（<mark class="tag-plugin mark" color="orange">结构</mark>类）</p><h4 id="非限制性定语从句："><a href="#非限制性定语从句：" class="headerlink" title="非限制性定语从句："></a>非限制性定语从句：</h4><mark class="tag-plugin mark" color="orange">as以整个句子作为先行词，翻译为“**正如**”</mark><p>as is known（众所周知）, &#x2F; as is said（据说）,&#x2F; as is reported（据报道）,as is announced（据宣布）,&#x2F;as is expected（据期待）,&#x2F;as we know（正如我们知道的那样）, as we expect（正如我们期待的那样）,&#x2F;as often happens（正如经常发生的那样）,&#x2F;as is often the case（正如通常情况下）,…</p><h3 id="要点八：the-way-作为先行词的定语从句"><a href="#要点八：the-way-作为先行词的定语从句" class="headerlink" title="要点八：the way 作为先行词的定语从句*"></a>要点八：the way 作为先行词的定语从句*</h3><p>I don’t like <mark class="tag-plugin mark" color="orange">the way</mark> <u>that/in which/省略</u> you speak to your Mom.</p><mark class="tag-plugin mark" color="orange">通常为that</mark><h3 id="要点九：定语从句的主谓一致问题"><a href="#要点九：定语从句的主谓一致问题" class="headerlink" title="要点九：定语从句的主谓一致问题"></a>要点九：定语从句的主谓一致问题</h3><p>1.定语从句的谓语动词的单复数取决于<mark class="tag-plugin mark" color="orange">先行词</mark>；</p><p>2.当先行词被<mark class="tag-plugin mark" color="orange">one of</mark>修饰，定从谓语用<mark class="tag-plugin mark" color="orange">复数</mark>；</p><p>   当先行词被<mark class="tag-plugin mark" color="orange">the only one of</mark>修饰，定从谓语用<mark class="tag-plugin mark" color="orange">单数</mark>；</p><p>3.<mark class="tag-plugin mark" color="orange">as和which以整个句子作为先行词</mark>，定从谓语用<mark class="tag-plugin mark" color="orange">单数</mark>；</p><blockquote><p>理解</p></blockquote><h3 id="要点十：特殊名词作为先行词的定语从句"><a href="#要点十：特殊名词作为先行词的定语从句" class="headerlink" title="要点十：特殊名词作为先行词的定语从句"></a>要点十：特殊名词作为先行词的定语从句</h3><p>situation&#x2F;case&#x2F;scene&#x2F;spot&#x2F;point（地步）&#x2F;stage   —<mark class="tag-plugin mark" color="orange">关系副词用where</mark></p><p>occasion（时机）—<mark class="tag-plugin mark" color="orange">关系副词用when</mark></p>]]></content>
    
    
    <summary type="html">网课内容：定语从句要点复习</summary>
    
    
    
    
    <category term="笔记" scheme="https://blog.hzchu.top/tags/%E7%AC%94%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>更便利地操控表彰大会--AHK</title>
    <link href="https://blog.hzchu.top/2022/Easier-Control-of-Recognition-Conferences-AHK/"/>
    <id>https://blog.hzchu.top/2022/Easier-Control-of-Recognition-Conferences-AHK/</id>
    <published>2022-12-25T14:44:07.000Z</published>
    <updated>2022-12-25T14:44:07.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>前几个月考完月考，第1次月考的时候因为主持人不懂按ppt.经过我舍友一番吹水，给我拉了上去，虽然威风，但我只负责按下一页和播放颁奖曲。<span class="tag-plugin emoji"><img no-lazy="" class="inline" src="https://jsd.hzchu.top/gh/norevi/waline-blobcatemojis@1.0/blobs/blobcatsadreach.png"/></span></p><p>然鹅，放歌的重任着实有点难为我手上的翻页笔，导致我只能反反复复地从后台门旁跑到电脑旁，毕竟不能挡着队伍的道（谢天谢地，那台笔记本的键盘还有多媒体键<span class="tag-plugin emoji"><img no-lazy="" class="inline" src="https://jsd.hzchu.top/gh/norevi/waline-blobcatemojis@1.0/blobs/blobcatbox.png"/></span>）</p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2022/12/25/63a7f3c180d9b.webp" alt="img" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">img</span></div></div><p>那么，在尴尬了3个小时后，为了应对期中后表彰大会同样的情况，还是要想个对策</p><h4 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h4><p>翻页笔，说白了就是个小键盘（宏），上下翻页自然是上下键，“黑屏”即为B键，再高级的就不是单纯的键盘了。当然，我手上这支来自于我勤俭持家的英语老师，只有下图这几个键</p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2022/12/25/63a7f3afa43d8.webp" alt="img" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">img</span></div></div><blockquote><p>图片在某宝找了个同款</p></blockquote><p>环顾一圈，只有Enter键是用不上的，那不就可以搞一波按键映射，让它成为播放&#x2F;暂停键</p><h4 id="实践"><a href="#实践" class="headerlink" title="实践"></a>实践</h4><p>按键映射还得是老大哥<em>——</em>Autohotkey(AHK)</p><p>根据AHK的语法，下面的“句子”便可以实现，复制写入一个文档里并改后缀名为.ahk，导入即可</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Enter::Media_Play_Pause</span><br></pre></td></tr></table></figure><p>我这里为了方便将其导出为一个独立程序</p><div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2022/12/25/63a7f3994f0f5.webp" alt="img" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">img</span></div></div><p>事实证明，效果不错，让我还能在里面摸鱼<span class="tag-plugin emoji"><img no-lazy="" class="inline" src="https://jsd.hzchu.top/gh/norevi/waline-blobcatemojis@1.0/blobs/ablobcatrainbow.png"/></span></p>]]></content>
    
    
    <summary type="html">在尴尬了3个小时后，为了应对期中后表彰大会同样的情况，还是要想个对策</summary>
    
    
    
    
    <category term="AHK" scheme="https://blog.hzchu.top/tags/AHK/"/>
    
  </entry>
  
  <entry>
    <title>使用Python半自动生成Altium原理图封装</title>
    <link href="https://blog.hzchu.top/2022/ptyhon-with-altium-designer/"/>
    <id>https://blog.hzchu.top/2022/ptyhon-with-altium-designer/</id>
    <published>2022-07-14T12:29:32.000Z</published>
    <updated>2022-07-14T12:29:32.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>放长假了，想搞点钱，对我而言来钱最快的就是帮别人画原理图PCB图了。<span class="tag-plugin emoji"><img no-lazy="" class="inline" src="https://jsd.hzchu.top/gh/cdn-x/emoji/aru-l/87.gif"/></span></p><p>不过画了几天发现一个问题：一直以来都自己画自己的，而现在帮别人画，客户发的很多原理图的封装都没有，基本上每画一个图都要画两三个，碰到一些小的还好几分钟就能画完，碰到一些大点的芯片引脚多的很的，自己画一个（配上电脑拉跨debuff）还要十几分钟，在立创EDA上面找的又经常有错，很是不爽<span class="tag-plugin emoji"><img no-lazy="" class="inline" src="https://jsd.hzchu.top/gh/cdn-x/emoji/aru-l/34.gif"/></span></p><p>不过得益于AD高版本可以以成文本形式保存原理图文件，使用程序完成任务也就成为了可能。</p><h3 id="历程"><a href="#历程" class="headerlink" title="历程"></a>历程</h3><p>随便新建一个原理图以ASCII保存。打开来可以看见这么一份”模板“，</p><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/23/63043cea7eada.webp" fancybox="true"/></div></div><details class="tag-plugin folding" color="yellow" child="codeblock"><summary><span>模板</span></summary><div class="body"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">|<span class="variable constant_">HEADER</span>=<span class="title class_">Protel</span> <span class="keyword">for</span> <span class="title class_">Windows</span> - <span class="title class_">Schematic</span> <span class="title class_">Capture</span> <span class="title class_">Ascii</span> <span class="title class_">File</span> <span class="title class_">Version</span> <span class="number">5.0</span>|<span class="variable constant_">WEIGHT</span>=<span class="number">38</span></span><br><span class="line">|<span class="variable constant_">ISBOC</span>=T|<span class="variable constant_">RECORD</span>=<span class="number">31</span>|<span class="variable constant_">VISIBLEGRIDON</span>=T|<span class="variable constant_">VISIBLEGRIDSIZE</span>=<span class="number">10</span>|<span class="variable constant_">DISPLAY_UNIT</span>=<span class="number">4</span>|<span class="variable constant_">CUSTOMY</span>=<span class="number">950</span>|<span class="variable constant_">BORDERON</span>=T|<span class="variable constant_">HOTSPOTGRIDON</span>=T|<span class="variable constant_">CUSTOMX</span>=<span class="number">1500</span>|<span class="variable constant_">CUSTOMMARGINWIDTH</span>=<span class="number">20</span>|<span class="title class_">SIZE1</span>=<span class="number">10</span>|<span class="variable constant_">SHEETNUMBERSPACESIZE</span>=<span class="number">4</span>|<span class="variable constant_">CUSTOMYZONES</span>=<span class="number">4</span>|<span class="variable constant_">USEMBCS</span>=T|<span class="variable constant_">FONTIDCOUNT</span>=<span class="number">1</span>|<span class="variable constant_">SNAPGRIDSIZE</span>=<span class="number">10</span>|<span class="variable constant_">SHEETSTYLE</span>=<span class="number">5</span>|<span class="variable constant_">SYSTEMFONT</span>=<span class="number">1</span>|<span class="variable constant_">HOTSPOTGRIDSIZE</span>=<span class="number">4</span>|<span class="title class_">FONTNAME1</span>=<span class="title class_">Times</span> <span class="title class_">New</span> <span class="title class_">Roman</span>|<span class="variable constant_">TITLEBLOCKON</span>=T|<span class="variable constant_">AREACOLOR</span>=<span class="number">16317695</span>|<span class="variable constant_">SNAPGRIDON</span>=T|<span class="variable constant_">CUSTOMXZONES</span>=<span class="number">6</span></span><br><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">ISHIDDEN</span>=T|<span class="variable constant_">NAME</span>=<span class="title class_">CurrentTime</span>|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">TEXT</span>=*|<span class="variable constant_">READONLYSTATE</span>=<span class="number">1</span>|<span class="variable constant_">UNIQUEID</span>=<span class="variable constant_">WFYPTBEC</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">ISHIDDEN</span>=T|<span class="variable constant_">NAME</span>=<span class="title class_">CurrentDate</span>|<span class="variable constant_">TEXT</span>=*|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">INDEXINSHEET</span>=<span class="number">1</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">READONLYSTATE</span>=<span class="number">1</span>|<span class="variable constant_">UNIQUEID</span>=<span class="variable constant_">KRGPTHWR</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">ISHIDDEN</span>=T|<span class="variable constant_">NAME</span>=<span class="title class_">Time</span>|<span class="variable constant_">TEXT</span>=*|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">INDEXINSHEET</span>=<span class="number">2</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">READONLYSTATE</span>=<span class="number">1</span>|<span class="variable constant_">UNIQUEID</span>=<span class="variable constant_">APNVELVY</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">ISHIDDEN</span>=T|<span class="variable constant_">NAME</span>=<span class="title class_">Date</span>|<span class="variable constant_">TEXT</span>=*|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">INDEXINSHEET</span>=<span class="number">3</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">READONLYSTATE</span>=<span class="number">1</span>|<span class="variable constant_">UNIQUEID</span>=<span class="variable constant_">DOFGRYNH</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">ISHIDDEN</span>=T|<span class="variable constant_">NAME</span>=<span class="title class_">DocumentFullPathAndName</span>|<span class="variable constant_">TEXT</span>=*|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">INDEXINSHEET</span>=<span class="number">4</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">READONLYSTATE</span>=<span class="number">1</span>|<span class="variable constant_">UNIQUEID</span>=<span class="variable constant_">XTILODYM</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">ISHIDDEN</span>=T|<span class="variable constant_">NAME</span>=<span class="title class_">DocumentName</span>|<span class="variable constant_">TEXT</span>=*|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">INDEXINSHEET</span>=<span class="number">5</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">READONLYSTATE</span>=<span class="number">1</span>|<span class="variable constant_">UNIQUEID</span>=<span class="variable constant_">CIXOCUKW</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">ISHIDDEN</span>=T|<span class="variable constant_">NAME</span>=<span class="title class_">ModifiedDate</span>|<span class="variable constant_">TEXT</span>=*|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">INDEXINSHEET</span>=<span class="number">6</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">READONLYSTATE</span>=<span class="number">1</span>|<span class="variable constant_">UNIQUEID</span>=<span class="variable constant_">CYVLOLHC</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">ISHIDDEN</span>=T|<span class="variable constant_">NAME</span>=<span class="title class_">ApprovedBy</span>|<span class="variable constant_">TEXT</span>=*|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">INDEXINSHEET</span>=<span class="number">7</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">READONLYSTATE</span>=<span class="number">1</span>|<span class="variable constant_">UNIQUEID</span>=<span class="variable constant_">UKLMMPSH</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">ISHIDDEN</span>=T|<span class="variable constant_">NAME</span>=<span class="title class_">CheckedBy</span>|<span class="variable constant_">TEXT</span>=*|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">INDEXINSHEET</span>=<span class="number">8</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">READONLYSTATE</span>=<span class="number">1</span>|<span class="variable constant_">UNIQUEID</span>=<span class="variable constant_">LGBVFHBI</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">ISHIDDEN</span>=T|<span class="variable constant_">NAME</span>=<span class="title class_">Author</span>|<span class="variable constant_">TEXT</span>=*|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">INDEXINSHEET</span>=<span class="number">9</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">READONLYSTATE</span>=<span class="number">1</span>|<span class="variable constant_">UNIQUEID</span>=<span class="variable constant_">NNMPOPVS</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">ISHIDDEN</span>=T|<span class="variable constant_">NAME</span>=<span class="title class_">CompanyName</span>|<span class="variable constant_">TEXT</span>=*|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">INDEXINSHEET</span>=<span class="number">10</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">READONLYSTATE</span>=<span class="number">1</span>|<span class="variable constant_">UNIQUEID</span>=<span class="variable constant_">ROXAGALI</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">ISHIDDEN</span>=T|<span class="variable constant_">NAME</span>=<span class="title class_">DrawnBy</span>|<span class="variable constant_">TEXT</span>=*|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">INDEXINSHEET</span>=<span class="number">11</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">READONLYSTATE</span>=<span class="number">1</span>|<span class="variable constant_">UNIQUEID</span>=<span class="variable constant_">GSEQEJEE</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">ISHIDDEN</span>=T|<span class="variable constant_">NAME</span>=<span class="title class_">Engineer</span>|<span class="variable constant_">TEXT</span>=*|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">INDEXINSHEET</span>=<span class="number">12</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">READONLYSTATE</span>=<span class="number">1</span>|<span class="variable constant_">UNIQUEID</span>=<span class="variable constant_">NMEAIFPG</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">ISHIDDEN</span>=T|<span class="variable constant_">NAME</span>=<span class="title class_">Organization</span>|<span class="variable constant_">TEXT</span>=*|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">INDEXINSHEET</span>=<span class="number">13</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">READONLYSTATE</span>=<span class="number">1</span>|<span class="variable constant_">UNIQUEID</span>=<span class="variable constant_">CHTRTWQS</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">ISHIDDEN</span>=T|<span class="variable constant_">NAME</span>=<span class="title class_">Address1</span>|<span class="variable constant_">TEXT</span>=*|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">INDEXINSHEET</span>=<span class="number">14</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">READONLYSTATE</span>=<span class="number">1</span>|<span class="variable constant_">UNIQUEID</span>=<span class="variable constant_">SLYDDXDR</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">ISHIDDEN</span>=T|<span class="variable constant_">NAME</span>=<span class="title class_">Address2</span>|<span class="variable constant_">TEXT</span>=*|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">INDEXINSHEET</span>=<span class="number">15</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">READONLYSTATE</span>=<span class="number">1</span>|<span class="variable constant_">UNIQUEID</span>=<span class="variable constant_">JNHWHKQI</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">ISHIDDEN</span>=T|<span class="variable constant_">NAME</span>=<span class="title class_">Address3</span>|<span class="variable constant_">TEXT</span>=*|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">INDEXINSHEET</span>=<span class="number">16</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">READONLYSTATE</span>=<span class="number">1</span>|<span class="variable constant_">UNIQUEID</span>=<span class="variable constant_">MIQKOJUC</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">ISHIDDEN</span>=T|<span class="variable constant_">NAME</span>=<span class="title class_">Address4</span>|<span class="variable constant_">TEXT</span>=*|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">INDEXINSHEET</span>=<span class="number">17</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">READONLYSTATE</span>=<span class="number">1</span>|<span class="variable constant_">UNIQUEID</span>=<span class="variable constant_">TBHPRINX</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">ISHIDDEN</span>=T|<span class="variable constant_">NAME</span>=<span class="title class_">Title</span>|<span class="variable constant_">TEXT</span>=*|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">INDEXINSHEET</span>=<span class="number">18</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">READONLYSTATE</span>=<span class="number">1</span>|<span class="variable constant_">UNIQUEID</span>=<span class="variable constant_">JRIVAVFH</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">ISHIDDEN</span>=T|<span class="variable constant_">NAME</span>=<span class="title class_">DocumentNumber</span>|<span class="variable constant_">TEXT</span>=*|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">INDEXINSHEET</span>=<span class="number">19</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">READONLYSTATE</span>=<span class="number">1</span>|<span class="variable constant_">UNIQUEID</span>=<span class="variable constant_">SJJFVEJY</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">ISHIDDEN</span>=T|<span class="variable constant_">NAME</span>=<span class="title class_">Revision</span>|<span class="variable constant_">TEXT</span>=*|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">INDEXINSHEET</span>=<span class="number">20</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">READONLYSTATE</span>=<span class="number">1</span>|<span class="variable constant_">UNIQUEID</span>=<span class="variable constant_">TPPALWNV</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">ISHIDDEN</span>=T|<span class="variable constant_">NAME</span>=<span class="title class_">SheetNumber</span>|<span class="variable constant_">TEXT</span>=*|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">INDEXINSHEET</span>=<span class="number">21</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">READONLYSTATE</span>=<span class="number">1</span>|<span class="variable constant_">UNIQUEID</span>=<span class="variable constant_">IXCDWQOY</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">ISHIDDEN</span>=T|<span class="variable constant_">NAME</span>=<span class="title class_">SheetTotal</span>|<span class="variable constant_">TEXT</span>=*|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">INDEXINSHEET</span>=<span class="number">22</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">READONLYSTATE</span>=<span class="number">1</span>|<span class="variable constant_">UNIQUEID</span>=<span class="variable constant_">WLJMRBEM</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">ISHIDDEN</span>=T|<span class="variable constant_">NAME</span>=<span class="title class_">Rule</span>|<span class="variable constant_">TEXT</span>=*|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">INDEXINSHEET</span>=<span class="number">23</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">READONLYSTATE</span>=<span class="number">1</span>|<span class="variable constant_">UNIQUEID</span>=<span class="variable constant_">SGMPJKTU</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">ISHIDDEN</span>=T|<span class="variable constant_">NAME</span>=<span class="title class_">ImagePath</span>|<span class="variable constant_">TEXT</span>=*|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">INDEXINSHEET</span>=<span class="number">24</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">READONLYSTATE</span>=<span class="number">1</span>|<span class="variable constant_">UNIQUEID</span>=<span class="variable constant_">CDHEMVMP</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">ISHIDDEN</span>=T|<span class="variable constant_">NAME</span>=<span class="title class_">ProjectName</span>|<span class="variable constant_">TEXT</span>=*|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">INDEXINSHEET</span>=<span class="number">25</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">READONLYSTATE</span>=<span class="number">1</span>|<span class="variable constant_">UNIQUEID</span>=<span class="variable constant_">FMWVHCEF</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">HEADER</span>=<span class="title class_">Icon</span> storage</span><br><span class="line">|<span class="variable constant_">HEADER</span>=<span class="title class_">Protel</span> <span class="keyword">for</span> <span class="title class_">Windows</span> - <span class="title class_">Schematic</span> <span class="title class_">Capture</span> <span class="title class_">Ascii</span> <span class="title class_">File</span> <span class="title class_">Version</span> <span class="number">5.0</span></span><br></pre></td></tr></table></figure></div></details><blockquote><p>文本是OLE复合文档,有开发需要可以在这个仓库里查看。</p></blockquote><div class="tag-plugin link dis-select"><a class="link-card plain" title="Altium schematic file format" href="https://github.com/vadmium/python-altium/blob/master/format.md" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill=""><div class="left"><span class="title">Altium schematic file format</span><span class="cap link fs12">https://github.com/vadmium/python-altium/blob/master/format.md</span></div><div class="right"><div class="lazy img" data-bg="/img/icons/08a41b181ce68.svg"></div></div></a></div><p>测试放置一个3PIN可以看到多了这么一部分</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">1</span>|<span class="variable constant_">PARTIDLOCKED</span>=T|<span class="variable constant_">COLOR</span>=<span class="number">128</span>|<span class="variable constant_">SOURCELIBRARYNAME</span>=<span class="title class_">Miscellaneous</span> <span class="title class_">Devices</span>.<span class="property">SchLib</span>|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">DISPLAYMODECOUNT</span>=<span class="number">1</span>|<span class="variable constant_">INDEXINSHEET</span>=<span class="number">26</span>|<span class="variable constant_">DESIGNITEMID</span>=3PIN|<span class="variable constant_">PARTCOUNT</span>=<span class="number">2</span>|<span class="variable constant_">LIBREFERENCE</span>=3PIN|<span class="variable constant_">LIBRARYPATH</span>=*|<span class="variable constant_">LOCATION</span>.<span class="property">X</span>=<span class="number">440</span>|<span class="variable constant_">AREACOLOR</span>=<span class="number">11599871</span>|<span class="variable constant_">TARGETFILENAME</span>=*|<span class="variable constant_">CURRENTPARTID</span>=<span class="number">1</span>|<span class="variable constant_">LOCATION</span>.<span class="property">Y</span>=<span class="number">450</span>|<span class="variable constant_">UNIQUEID</span>=<span class="variable constant_">JDTBOSLP</span></span><br><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">14</span>|<span class="variable constant_">ISNOTACCESIBLE</span>=T|<span class="variable constant_">LOCATION</span>.<span class="property">X</span>=<span class="number">440</span>|<span class="variable constant_">CORNER</span>.<span class="property">Y</span>=<span class="number">450</span>|<span class="variable constant_">ISSOLID</span>=T|<span class="variable constant_">OWNERPARTID</span>=<span class="number">1</span>|<span class="variable constant_">OWNERINDEX</span>=<span class="number">27</span>|<span class="variable constant_">CORNER</span>.<span class="property">X</span>=<span class="number">470</span>|<span class="variable constant_">COLOR</span>=<span class="number">128</span>|<span class="variable constant_">AREACOLOR</span>=<span class="number">11599871</span>|<span class="variable constant_">LOCATION</span>.<span class="property">Y</span>=<span class="number">410</span></span><br><span class="line">|<span class="variable constant_">DESIGNATOR</span>=<span class="number">1</span>|<span class="variable constant_">RECORD</span>=<span class="number">2</span>|<span class="variable constant_">NAME</span>=<span class="number">1</span>|<span class="variable constant_">LOCATION</span>.<span class="property">X</span>=<span class="number">440</span>|<span class="variable constant_">PINLENGTH</span>=<span class="number">20</span>|<span class="variable constant_">OWNERPARTID</span>=<span class="number">1</span>|<span class="variable constant_">PINCONGLOMERATE</span>=<span class="number">42</span>|<span class="variable constant_">ELECTRICAL</span>=<span class="number">4</span>|<span class="variable constant_">OWNERINDEX</span>=<span class="number">27</span>|<span class="variable constant_">FORMALTYPE</span>=<span class="number">1</span>|<span class="variable constant_">LOCATION</span>.<span class="property">Y</span>=<span class="number">440</span>|<span class="variable constant_">SWAPIDPIN</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">ISHIDDEN</span>=T|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">LOCATION</span>.<span class="property">X</span>=<span class="number">440</span>|<span class="variable constant_">NAME</span>=<span class="title class_">PinUniqueId</span>|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">OWNERINDEX</span>=<span class="number">29</span>|<span class="variable constant_">TEXT</span>=<span class="variable constant_">BNSVPWEQ</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">LOCATION</span>.<span class="property">Y</span>=<span class="number">440</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">DESIGNATOR</span>=<span class="number">2</span>|<span class="variable constant_">RECORD</span>=<span class="number">2</span>|<span class="variable constant_">NAME</span>=<span class="number">2</span>|<span class="variable constant_">LOCATION</span>.<span class="property">X</span>=<span class="number">440</span>|<span class="variable constant_">PINLENGTH</span>=<span class="number">20</span>|<span class="variable constant_">OWNERPARTID</span>=<span class="number">1</span>|<span class="variable constant_">PINCONGLOMERATE</span>=<span class="number">42</span>|<span class="variable constant_">ELECTRICAL</span>=<span class="number">4</span>|<span class="variable constant_">OWNERINDEX</span>=<span class="number">27</span>|<span class="variable constant_">FORMALTYPE</span>=<span class="number">1</span>|<span class="variable constant_">LOCATION</span>.<span class="property">Y</span>=<span class="number">430</span>|<span class="variable constant_">SWAPIDPIN</span>=<span class="number">2</span></span><br><span class="line">|<span class="variable constant_">ISHIDDEN</span>=T|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">LOCATION</span>.<span class="property">X</span>=<span class="number">440</span>|<span class="variable constant_">NAME</span>=<span class="title class_">PinUniqueId</span>|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">OWNERINDEX</span>=<span class="number">30</span>|<span class="variable constant_">TEXT</span>=<span class="variable constant_">DQCSMDTO</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">LOCATION</span>.<span class="property">Y</span>=<span class="number">430</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">DESIGNATOR</span>=<span class="number">3</span>|<span class="variable constant_">RECORD</span>=<span class="number">2</span>|<span class="variable constant_">NAME</span>=<span class="number">3</span>|<span class="variable constant_">LOCATION</span>.<span class="property">X</span>=<span class="number">440</span>|<span class="variable constant_">PINLENGTH</span>=<span class="number">20</span>|<span class="variable constant_">OWNERPARTID</span>=<span class="number">1</span>|<span class="variable constant_">PINCONGLOMERATE</span>=<span class="number">42</span>|<span class="variable constant_">ELECTRICAL</span>=<span class="number">4</span>|<span class="variable constant_">OWNERINDEX</span>=<span class="number">27</span>|<span class="variable constant_">FORMALTYPE</span>=<span class="number">1</span>|<span class="variable constant_">LOCATION</span>.<span class="property">Y</span>=<span class="number">420</span>|<span class="variable constant_">SWAPIDPIN</span>=<span class="number">3</span></span><br><span class="line">|<span class="variable constant_">ISHIDDEN</span>=T|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">LOCATION</span>.<span class="property">X</span>=<span class="number">440</span>|<span class="variable constant_">NAME</span>=<span class="title class_">PinUniqueId</span>|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">OWNERINDEX</span>=<span class="number">31</span>|<span class="variable constant_">TEXT</span>=<span class="variable constant_">TFWBGGDS</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">LOCATION</span>.<span class="property">Y</span>=<span class="number">420</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">34</span>|<span class="variable constant_">LOCATION</span>.<span class="property">X</span>=<span class="number">440</span>|<span class="variable constant_">NAME</span>=<span class="title class_">Designator</span>|<span class="variable constant_">TEXT</span>=P?|<span class="variable constant_">OWNERINDEX</span>=<span class="number">27</span>|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388408</span>|<span class="variable constant_">INDEXINSHEET</span>=-<span class="number">1</span>|<span class="variable constant_">READONLYSTATE</span>=<span class="number">1</span>|<span class="variable constant_">LOCATION</span>.<span class="property">Y</span>=<span class="number">450</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">RECORD</span>=<span class="number">41</span>|<span class="variable constant_">LOCATION</span>.<span class="property">X</span>=<span class="number">440</span>|<span class="variable constant_">NAME</span>=<span class="title class_">Comment</span>|<span class="variable constant_">TEXT</span>=3PIN|<span class="variable constant_">OWNERINDEX</span>=<span class="number">27</span>|<span class="variable constant_">OWNERPARTID</span>=-<span class="number">1</span>|<span class="variable constant_">COLOR</span>=<span class="number">8388608</span>|<span class="variable constant_">INDEXINSHEET</span>=-<span class="number">1</span>|<span class="variable constant_">UNIQUEID</span>=<span class="variable constant_">SIFBYFRD</span>|<span class="variable constant_">LOCATION</span>.<span class="property">Y</span>=<span class="number">400</span>|<span class="variable constant_">FONTID</span>=<span class="number">1</span></span><br><span class="line">|<span class="variable constant_">OWNERINDEX</span>=<span class="number">27</span>|<span class="variable constant_">RECORD</span>=<span class="number">44</span></span><br></pre></td></tr></table></figure><p>可以看出</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">RECORD</span> = </span><br><span class="line"><span class="number">1</span>：器件开始</span><br><span class="line"><span class="number">2</span>: 引脚</span><br><span class="line"><span class="number">14</span>：长方形（背景）</span><br><span class="line"><span class="number">34</span>：元件标号</span><br><span class="line"><span class="number">41</span>：脚注</span><br><span class="line"><span class="number">44</span>：器件结束</span><br><span class="line"><span class="variable constant_">DESIGNATOR</span>：管脚标号</span><br></pre></td></tr></table></figure><p>还有像xy坐标，NAME，COLOR等不必多说</p><p>接着就是写个python脚本把它们拼起来辣</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> string</span><br><span class="line"></span><br><span class="line">head2 = <span class="string">&#x27;&#x27;&#x27;|ISBOC=T|RECORD=31|VISIBLEGRIDON=T|VISIBLEGRIDSIZE=10|DISPLAY_UNIT=4|CUSTOMY=950|BORDERON=T|HOTSPOTGRIDON=T|CUSTOMX=1500|CUSTOMMARGINWIDTH=20|SIZE1=10|SHEETNUMBERSPACESIZE=4|CUSTOMYZONES=4|USEMBCS=T|FONTIDCOUNT=1|SNAPGRIDSIZE=10|SHEETSTYLE=8|SYSTEMFONT=1|HOTSPOTGRIDSIZE=4|FONTNAME1=Times New Roman|TITLEBLOCKON=T|AREACOLOR=16317695|SNAPGRIDON=T|CUSTOMXZONES=6</span></span><br><span class="line"><span class="string">|RECORD=41|ISHIDDEN=T|NAME=CurrentTime|OWNERPARTID=-1|COLOR=8388608|TEXT=*|READONLYSTATE=1|UNIQUEID=WFYPTBEC|FONTID=1</span></span><br><span class="line"><span class="string">|RECORD=41|ISHIDDEN=T|NAME=CurrentDate|TEXT=*|OWNERPARTID=-1|INDEXINSHEET=1|COLOR=8388608|READONLYSTATE=1|UNIQUEID=KRGPTHWR|FONTID=1</span></span><br><span class="line"><span class="string">|RECORD=41|ISHIDDEN=T|NAME=Time|TEXT=*|OWNERPARTID=-1|INDEXINSHEET=2|COLOR=8388608|READONLYSTATE=1|UNIQUEID=APNVELVY|FONTID=1</span></span><br><span class="line"><span class="string">|RECORD=41|ISHIDDEN=T|NAME=Date|TEXT=*|OWNERPARTID=-1|INDEXINSHEET=3|COLOR=8388608|READONLYSTATE=1|UNIQUEID=DOFGRYNH|FONTID=1</span></span><br><span class="line"><span class="string">|RECORD=41|ISHIDDEN=T|NAME=DocumentFullPathAndName|TEXT=*|OWNERPARTID=-1|INDEXINSHEET=4|COLOR=8388608|READONLYSTATE=1|UNIQUEID=XTILODYM|FONTID=1</span></span><br><span class="line"><span class="string">|RECORD=41|ISHIDDEN=T|NAME=DocumentName|TEXT=*|OWNERPARTID=-1|INDEXINSHEET=5|COLOR=8388608|READONLYSTATE=1|UNIQUEID=CIXOCUKW|FONTID=1</span></span><br><span class="line"><span class="string">|RECORD=41|ISHIDDEN=T|NAME=ModifiedDate|TEXT=*|OWNERPARTID=-1|INDEXINSHEET=6|COLOR=8388608|READONLYSTATE=1|UNIQUEID=CYVLOLHC|FONTID=1</span></span><br><span class="line"><span class="string">|RECORD=41|ISHIDDEN=T|NAME=ApprovedBy|TEXT=*|OWNERPARTID=-1|INDEXINSHEET=7|COLOR=8388608|READONLYSTATE=1|UNIQUEID=UKLMMPSH|FONTID=1</span></span><br><span class="line"><span class="string">|RECORD=41|ISHIDDEN=T|NAME=CheckedBy|TEXT=*|OWNERPARTID=-1|INDEXINSHEET=8|COLOR=8388608|READONLYSTATE=1|UNIQUEID=LGBVFHBI|FONTID=1</span></span><br><span class="line"><span class="string">|RECORD=41|ISHIDDEN=T|NAME=Author|TEXT=*|OWNERPARTID=-1|INDEXINSHEET=9|COLOR=8388608|READONLYSTATE=1|UNIQUEID=NNMPOPVS|FONTID=1</span></span><br><span class="line"><span class="string">|RECORD=41|ISHIDDEN=T|NAME=CompanyName|TEXT=*|OWNERPARTID=-1|INDEXINSHEET=10|COLOR=8388608|READONLYSTATE=1|UNIQUEID=ROXAGALI|FONTID=1</span></span><br><span class="line"><span class="string">|RECORD=41|ISHIDDEN=T|NAME=DrawnBy|TEXT=*|OWNERPARTID=-1|INDEXINSHEET=11|COLOR=8388608|READONLYSTATE=1|UNIQUEID=GSEQEJEE|FONTID=1</span></span><br><span class="line"><span class="string">|RECORD=41|ISHIDDEN=T|NAME=Engineer|TEXT=*|OWNERPARTID=-1|INDEXINSHEET=12|COLOR=8388608|READONLYSTATE=1|UNIQUEID=NMEAIFPG|FONTID=1</span></span><br><span class="line"><span class="string">|RECORD=41|ISHIDDEN=T|NAME=Organization|TEXT=*|OWNERPARTID=-1|INDEXINSHEET=13|COLOR=8388608|READONLYSTATE=1|UNIQUEID=CHTRTWQS|FONTID=1</span></span><br><span class="line"><span class="string">|RECORD=41|ISHIDDEN=T|NAME=Address1|TEXT=*|OWNERPARTID=-1|INDEXINSHEET=14|COLOR=8388608|READONLYSTATE=1|UNIQUEID=SLYDDXDR|FONTID=1</span></span><br><span class="line"><span class="string">|RECORD=41|ISHIDDEN=T|NAME=Address2|TEXT=*|OWNERPARTID=-1|INDEXINSHEET=15|COLOR=8388608|READONLYSTATE=1|UNIQUEID=JNHWHKQI|FONTID=1</span></span><br><span class="line"><span class="string">|RECORD=41|ISHIDDEN=T|NAME=Address3|TEXT=*|OWNERPARTID=-1|INDEXINSHEET=16|COLOR=8388608|READONLYSTATE=1|UNIQUEID=MIQKOJUC|FONTID=1</span></span><br><span class="line"><span class="string">|RECORD=41|ISHIDDEN=T|NAME=Address4|TEXT=*|OWNERPARTID=-1|INDEXINSHEET=17|COLOR=8388608|READONLYSTATE=1|UNIQUEID=TBHPRINX|FONTID=1</span></span><br><span class="line"><span class="string">|RECORD=41|ISHIDDEN=T|NAME=Title|TEXT=*|OWNERPARTID=-1|INDEXINSHEET=18|COLOR=8388608|READONLYSTATE=1|UNIQUEID=JRIVAVFH|FONTID=1</span></span><br><span class="line"><span class="string">|RECORD=41|ISHIDDEN=T|NAME=DocumentNumber|TEXT=*|OWNERPARTID=-1|INDEXINSHEET=19|COLOR=8388608|READONLYSTATE=1|UNIQUEID=SJJFVEJY|FONTID=1</span></span><br><span class="line"><span class="string">|RECORD=41|ISHIDDEN=T|NAME=Revision|TEXT=*|OWNERPARTID=-1|INDEXINSHEET=20|COLOR=8388608|READONLYSTATE=1|UNIQUEID=TPPALWNV|FONTID=1</span></span><br><span class="line"><span class="string">|RECORD=41|ISHIDDEN=T|NAME=SheetNumber|TEXT=*|OWNERPARTID=-1|INDEXINSHEET=21|COLOR=8388608|READONLYSTATE=1|UNIQUEID=IXCDWQOY|FONTID=1</span></span><br><span class="line"><span class="string">|RECORD=41|ISHIDDEN=T|NAME=SheetTotal|TEXT=*|OWNERPARTID=-1|INDEXINSHEET=22|COLOR=8388608|READONLYSTATE=1|UNIQUEID=WLJMRBEM|FONTID=1</span></span><br><span class="line"><span class="string">|RECORD=41|ISHIDDEN=T|NAME=Rule|TEXT=*|OWNERPARTID=-1|INDEXINSHEET=23|COLOR=8388608|READONLYSTATE=1|UNIQUEID=SGMPJKTU|FONTID=1</span></span><br><span class="line"><span class="string">|RECORD=41|ISHIDDEN=T|NAME=ImagePath|TEXT=*|OWNERPARTID=-1|INDEXINSHEET=24|COLOR=8388608|READONLYSTATE=1|UNIQUEID=CDHEMVMP|FONTID=1</span></span><br><span class="line"><span class="string">|RECORD=41|ISHIDDEN=T|NAME=ProjectName|TEXT=*|OWNERPARTID=-1|INDEXINSHEET=25|COLOR=8388608|READONLYSTATE=1|UNIQUEID=FMWVHCEF|FONTID=1</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    Component_overname =<span class="built_in">input</span>(<span class="string">&quot;输入元件标号(eg:U)：&quot;</span>)</span><br><span class="line">    Component_name = <span class="built_in">input</span>(<span class="string">&quot;输入设元件名称(eg:3PIN)：&quot;</span>)</span><br><span class="line">    Component_pin = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;输入元件引脚数量(eg:30)：&quot;</span>))</span><br><span class="line">    Component_size = <span class="built_in">input</span>(<span class="string">&quot;输入元件宽度(eg:5)：&quot;</span>)</span><br><span class="line">    Component_rightpin = <span class="built_in">input</span>(<span class="string">&quot;是否使用右侧引脚(y/n)：&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> Component_size == <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">        Component_size = <span class="number">5</span></span><br><span class="line">    <span class="keyword">if</span> Component_rightpin == <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">        Component_rightpin = <span class="string">&#x27;y&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> Component_rightpin == <span class="string">&quot;y&quot;</span> <span class="keyword">or</span> Component_rightpin == <span class="string">&quot;Y&quot;</span>:</span><br><span class="line">        Component_rightpin = <span class="string">&quot;y&quot;</span></span><br><span class="line">        Component_pintype=<span class="built_in">input</span>(<span class="string">&quot;选择放置类型И/凵/Z(输1为И，2为凵，3为Z)：&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> Component_pintype != <span class="string">&quot;1&quot;</span> <span class="keyword">and</span> Component_pintype != <span class="string">&quot;2&quot;</span> <span class="keyword">and</span> Component_pintype != <span class="string">&quot;3&quot;</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;输入错误，请重新输入&quot;</span>)</span><br><span class="line">            Component_pintype = <span class="built_in">input</span>(<span class="string">&quot;选择放置类型И/凵(输1为И，2为凵)：&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> Component_pin &gt;= <span class="number">35</span>:</span><br><span class="line">        Constants = <span class="number">930</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        Constants = <span class="number">450</span></span><br><span class="line">    x1 = Constants-<span class="built_in">int</span>(Component_size)*<span class="number">10</span></span><br><span class="line">    <span class="keyword">if</span> Component_rightpin == <span class="string">&quot;y&quot;</span> :</span><br><span class="line">        y = Constants+Component_pin*<span class="number">5</span>+<span class="number">10</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        y = Constants+Component_pin*<span class="number">10</span>+<span class="number">10</span></span><br><span class="line">    <span class="comment">#print(x1)</span></span><br><span class="line">    <span class="comment">#print(y)</span></span><br><span class="line">    body1 = <span class="string">&#x27;|RECORD=1|PARTIDLOCKED=T|COLOR=128|SOURCELIBRARYNAME=thisprogrambythun888.SchLib|OWNERPARTID=-1|DISPLAYMODECOUNT=1|INDEXINSHEET=26|DESIGNITEMID=&#x27;</span>+<span class="built_in">str</span>(Component_name)+<span class="string">&#x27;|PARTCOUNT=2|LIBREFERENCE=&#x27;</span>+<span class="built_in">str</span>(Component_name)+<span class="string">&#x27;|LIBRARYPATH=*|LOCATION.X=&#x27;</span>+<span class="built_in">str</span>(x1)+<span class="string">&#x27;|AREACOLOR=11599871|TARGETFILENAME=*|CURRENTPARTID=1|LOCATION.Y=&#x27;</span>+<span class="built_in">str</span>(Constants)+<span class="string">&#x27;|UNIQUEID=&#x27;</span>+<span class="built_in">str</span>(uniqueid())+<span class="string">&#x27;\n&#x27;</span></span><br><span class="line">    body2 =<span class="string">&#x27;|RECORD=14|ISNOTACCESIBLE=T|LOCATION.X=&#x27;</span>+<span class="built_in">str</span>(Constants)+<span class="string">&#x27;|CORNER.Y=&#x27;</span>+<span class="built_in">str</span>(Constants)+<span class="string">&#x27;|ISSOLID=T|OWNERPARTID=1|OWNERINDEX=27|CORNER.X=&#x27;</span>+<span class="built_in">str</span>(x1)+<span class="string">&#x27;|COLOR=128|AREACOLOR=11599871|LOCATION.Y=&#x27;</span>+<span class="built_in">str</span>(y)+<span class="string">&#x27;\n&#x27;</span></span><br><span class="line">    body3 =<span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(Component_pin):</span><br><span class="line">        pin_num = i+<span class="number">1</span></span><br><span class="line">        pin_name = <span class="built_in">input</span>(<span class="string">&quot;输入第&quot;</span>+<span class="built_in">str</span>(pin_num)+<span class="string">&quot;个pin的名称(eg:TX)：&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> pin_name ==<span class="string">&quot;&quot;</span>:</span><br><span class="line">            pin_name = pin_num</span><br><span class="line">        pin_y = y-pin_num*<span class="number">10</span></span><br><span class="line">        index = i*<span class="number">2</span>+<span class="number">27</span></span><br><span class="line">        <span class="keyword">if</span> Component_rightpin == <span class="string">&quot;y&quot;</span>:</span><br><span class="line">            <span class="keyword">if</span> Component_pintype ==<span class="string">&quot;1&quot;</span>:</span><br><span class="line">                <span class="keyword">if</span> pin_num&lt;= Component_pin/<span class="number">2</span>:</span><br><span class="line">                    body3 = body3+<span class="string">&#x27;|DESIGNATOR=&#x27;</span>+<span class="built_in">str</span>(pin_num)+<span class="string">&#x27;|RECORD=2|NAME=&#x27;</span>+<span class="built_in">str</span>(pin_name)+<span class="string">&#x27;|LOCATION.X=&#x27;</span>+<span class="built_in">str</span>(x1)+<span class="string">&#x27;|PINLENGTH=20|OWNERPARTID=1|PINCONGLOMERATE=58|ELECTRICAL=4|OWNERINDEX=27|FORMALTYPE=1|LOCATION.Y=&#x27;</span>+<span class="built_in">str</span>(pin_y)+<span class="string">&#x27;\n&#x27;</span></span><br><span class="line">                    body3 = body3+<span class="string">&#x27;|ISHIDDEN=T|RECORD=41|LOCATION.X=&#x27;</span>+<span class="built_in">str</span>(Constants)+<span class="string">&#x27;|NAME=PinUniqueId|OWNERPARTID=-1|OWNERINDEX=&#x27;</span>+<span class="built_in">str</span>(index)+<span class="string">&#x27;|TEXT=&#x27;</span>+<span class="built_in">str</span>(uniqueid())+<span class="string">&#x27;|COLOR=8388608|LOCATION.Y=&#x27;</span>+<span class="built_in">str</span>(pin_y)+<span class="string">&#x27;|FONTID=1\n&#x27;</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    pin_y = delete_extra_zero(pin_y+Component_pin/<span class="number">2</span>*<span class="number">10</span>)</span><br><span class="line">                    <span class="comment">#print(pin_y)</span></span><br><span class="line">                    body3 = body3+<span class="string">&#x27;|DESIGNATOR=&#x27;</span>+<span class="built_in">str</span>(pin_num)+<span class="string">&#x27;|RECORD=2|NAME=&#x27;</span>+<span class="built_in">str</span>(pin_name)+<span class="string">&#x27;|LOCATION.X=&#x27;</span>+<span class="built_in">str</span>(Constants)+<span class="string">&#x27;|PINLENGTH=20|OWNERPARTID=1|PINCONGLOMERATE=56|ELECTRICAL=4|OWNERINDEX=27|FORMALTYPE=1|LOCATION.Y=&#x27;</span>+<span class="built_in">str</span>(pin_y)+<span class="string">&#x27;\n&#x27;</span></span><br><span class="line">                    body3 = body3+<span class="string">&#x27;|ISHIDDEN=T|RECORD=41|LOCATION.X=&#x27;</span>+<span class="built_in">str</span>(Constants)+<span class="string">&#x27;|NAME=PinUniqueId|OWNERPARTID=-1|OWNERINDEX=&#x27;</span>+<span class="built_in">str</span>(index)+<span class="string">&#x27;|TEXT=&#x27;</span>+<span class="built_in">str</span>(uniqueid())+<span class="string">&#x27;|COLOR=8388608|LOCATION.Y=&#x27;</span>+<span class="built_in">str</span>(pin_y)+<span class="string">&#x27;|FONTID=1\n&#x27;</span>                </span><br><span class="line">            <span class="keyword">elif</span> Component_pintype ==<span class="string">&quot;2&quot;</span>:</span><br><span class="line">                <span class="keyword">if</span> pin_num&lt;= Component_pin/<span class="number">2</span>:</span><br><span class="line">                    body3 = body3+<span class="string">&#x27;|DESIGNATOR=&#x27;</span>+<span class="built_in">str</span>(pin_num)+<span class="string">&#x27;|RECORD=2|NAME=&#x27;</span>+<span class="built_in">str</span>(pin_name)+<span class="string">&#x27;|LOCATION.X=&#x27;</span>+<span class="built_in">str</span>(x1)+<span class="string">&#x27;|PINLENGTH=20|OWNERPARTID=1|PINCONGLOMERATE=58|ELECTRICAL=4|OWNERINDEX=27|FORMALTYPE=1|LOCATION.Y=&#x27;</span>+<span class="built_in">str</span>(pin_y)+<span class="string">&#x27;\n&#x27;</span></span><br><span class="line">                    body3 = body3+<span class="string">&#x27;|ISHIDDEN=T|RECORD=41|LOCATION.X=&#x27;</span>+<span class="built_in">str</span>(Constants)+<span class="string">&#x27;|NAME=PinUniqueId|OWNERPARTID=-1|OWNERINDEX=&#x27;</span>+<span class="built_in">str</span>(index)+<span class="string">&#x27;|TEXT=&#x27;</span>+<span class="built_in">str</span>(uniqueid())+<span class="string">&#x27;|COLOR=8388608|LOCATION.Y=&#x27;</span>+<span class="built_in">str</span>(pin_y)+<span class="string">&#x27;|FONTID=1\n&#x27;</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    pin_y = delete_extra_zero(y-Component_pin/<span class="number">2</span>*<span class="number">10</span>+(pin_num-Component_pin/<span class="number">2</span>-<span class="number">1</span>)*<span class="number">10</span>)</span><br><span class="line">                    <span class="comment">#print(pin_y)</span></span><br><span class="line">                    body3 = body3+<span class="string">&#x27;|DESIGNATOR=&#x27;</span>+<span class="built_in">str</span>(pin_num)+<span class="string">&#x27;|RECORD=2|NAME=&#x27;</span>+<span class="built_in">str</span>(pin_name)+<span class="string">&#x27;|LOCATION.X=&#x27;</span>+<span class="built_in">str</span>(Constants)+<span class="string">&#x27;|PINLENGTH=20|OWNERPARTID=1|PINCONGLOMERATE=56|ELECTRICAL=4|OWNERINDEX=27|FORMALTYPE=1|LOCATION.Y=&#x27;</span>+<span class="built_in">str</span>(pin_y)+<span class="string">&#x27;\n&#x27;</span></span><br><span class="line">                    body3 = body3+<span class="string">&#x27;|ISHIDDEN=T|RECORD=41|LOCATION.X=&#x27;</span>+<span class="built_in">str</span>(Constants)+<span class="string">&#x27;|NAME=PinUniqueId|OWNERPARTID=-1|OWNERINDEX=&#x27;</span>+<span class="built_in">str</span>(index)+<span class="string">&#x27;|TEXT=&#x27;</span>+<span class="built_in">str</span>(uniqueid())+<span class="string">&#x27;|COLOR=8388608|LOCATION.Y=&#x27;</span>+<span class="built_in">str</span>(pin_y)+<span class="string">&#x27;|FONTID=1\n&#x27;</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">elif</span> Component_pintype ==<span class="string">&quot;3&quot;</span>:</span><br><span class="line">                <span class="keyword">if</span> (pin_num &amp; <span class="number">1</span>) == <span class="number">0</span>: </span><br><span class="line">                    pin_y = y-pin_num*<span class="number">5</span> <span class="comment">#/2*10</span></span><br><span class="line">                    body3 = body3+<span class="string">&#x27;|DESIGNATOR=&#x27;</span>+<span class="built_in">str</span>(pin_num)+<span class="string">&#x27;|RECORD=2|NAME=&#x27;</span>+<span class="built_in">str</span>(pin_name)+<span class="string">&#x27;|LOCATION.X=&#x27;</span>+<span class="built_in">str</span>(Constants)+<span class="string">&#x27;|PINLENGTH=20|OWNERPARTID=1|PINCONGLOMERATE=56|ELECTRICAL=4|OWNERINDEX=27|FORMALTYPE=1|LOCATION.Y=&#x27;</span>+<span class="built_in">str</span>(pin_y)+<span class="string">&#x27;\n&#x27;</span></span><br><span class="line">                    body3 = body3+<span class="string">&#x27;|ISHIDDEN=T|RECORD=41|LOCATION.X=&#x27;</span>+<span class="built_in">str</span>(x1)+<span class="string">&#x27;|NAME=PinUniqueId|OWNERPARTID=-1|OWNERINDEX=&#x27;</span>+<span class="built_in">str</span>(index)+<span class="string">&#x27;|TEXT=&#x27;</span>+<span class="built_in">str</span>(uniqueid())+<span class="string">&#x27;|COLOR=8388608|LOCATION.Y=&#x27;</span>+<span class="built_in">str</span>(pin_y)+<span class="string">&#x27;|FONTID=1\n&#x27;</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    pin_y = y-(pin_num+<span class="number">1</span>)*<span class="number">5</span> <span class="comment">#/2*10</span></span><br><span class="line">                    body3 = body3+<span class="string">&#x27;|DESIGNATOR=&#x27;</span>+<span class="built_in">str</span>(pin_num)+<span class="string">&#x27;|RECORD=2|NAME=&#x27;</span>+<span class="built_in">str</span>(pin_name)+<span class="string">&#x27;|LOCATION.X=&#x27;</span>+<span class="built_in">str</span>(x1)+<span class="string">&#x27;|PINLENGTH=20|OWNERPARTID=1|PINCONGLOMERATE=58|ELECTRICAL=4|OWNERINDEX=27|FORMALTYPE=1|LOCATION.Y=&#x27;</span>+<span class="built_in">str</span>(pin_y)+<span class="string">&#x27;\n&#x27;</span></span><br><span class="line">                    body3 = body3+<span class="string">&#x27;|ISHIDDEN=T|RECORD=41|LOCATION.X=&#x27;</span>+<span class="built_in">str</span>(x1)+<span class="string">&#x27;|NAME=PinUniqueId|OWNERPARTID=-1|OWNERINDEX=&#x27;</span>+<span class="built_in">str</span>(index)+<span class="string">&#x27;|TEXT=&#x27;</span>+<span class="built_in">str</span>(uniqueid())+<span class="string">&#x27;|COLOR=8388608|LOCATION.Y=&#x27;</span>+<span class="built_in">str</span>(pin_y)+<span class="string">&#x27;|FONTID=1\n&#x27;</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            body3 = body3+<span class="string">&#x27;|DESIGNATOR=&#x27;</span>+<span class="built_in">str</span>(pin_num)+<span class="string">&#x27;|RECORD=2|NAME=&#x27;</span>+<span class="built_in">str</span>(pin_name)+<span class="string">&#x27;|LOCATION.X=&#x27;</span>+<span class="built_in">str</span>(x1)+<span class="string">&#x27;|PINLENGTH=20|OWNERPARTID=1|PINCONGLOMERATE=58|ELECTRICAL=4|OWNERINDEX=27|FORMALTYPE=1|LOCATION.Y=&#x27;</span>+<span class="built_in">str</span>(pin_y)+<span class="string">&#x27;\n&#x27;</span></span><br><span class="line">            body3 = body3+<span class="string">&#x27;|ISHIDDEN=T|RECORD=41|LOCATION.X=&#x27;</span>+<span class="built_in">str</span>(x1)+<span class="string">&#x27;|NAME=PinUniqueId|OWNERPARTID=-1|OWNERINDEX=&#x27;</span>+<span class="built_in">str</span>(index)+<span class="string">&#x27;|TEXT=&#x27;</span>+<span class="built_in">str</span>(uniqueid())+<span class="string">&#x27;|COLOR=8388608|LOCATION.Y=&#x27;</span>+<span class="built_in">str</span>(pin_y)+<span class="string">&#x27;|FONTID=1\n&#x27;</span></span><br><span class="line">        head1 = <span class="string">&#x27;|HEADER=Protel for Windows - Schematic Capture Ascii File Version 5.0|WEIGHT=&#x27;</span>+<span class="built_in">str</span>(index+<span class="number">10</span>)+<span class="string">&#x27;\n&#x27;</span></span><br><span class="line">    body4=<span class="string">&#x27;|RECORD=34|LOCATION.X=&#x27;</span>+<span class="built_in">str</span>(Constants)+<span class="string">&#x27;|NAME=Designator|TEXT=&#x27;</span>+<span class="built_in">str</span>(Component_overname)+<span class="string">&#x27;|OWNERINDEX=27|OWNERPARTID=-1|COLOR=8388608|INDEXINSHEET=-1|READONLYSTATE=1|LOCATION.Y=&#x27;</span>+<span class="built_in">str</span>(Constants)+<span class="string">&#x27;|FONTID=1\n&#x27;</span></span><br><span class="line">    body5 = <span class="string">&#x27;|RECORD=41|LOCATION.X=&#x27;</span>+<span class="built_in">str</span>(Constants)+<span class="string">&#x27;|NAME=Comment|TEXT=&#x27;</span>+<span class="built_in">str</span>(Component_name)+<span class="string">&#x27;|OWNERINDEX=27|OWNERPARTID=-1|COLOR=8388608|INDEXINSHEET=-1|UNIQUEID=&#x27;</span>+<span class="built_in">str</span>(uniqueid())+<span class="string">&#x27;|LOCATION.Y=&#x27;</span>+<span class="built_in">str</span>(Constants-<span class="number">10</span>)+<span class="string">&#x27;|FONTID=1\n&#x27;</span></span><br><span class="line">    body6= <span class="string">&#x27;&#x27;&#x27;|OWNERINDEX=27|RECORD=44</span></span><br><span class="line"><span class="string">|HEADER=Icon storage</span></span><br><span class="line"><span class="string">|HEADER=Protel for Windows - Schematic Capture Ascii File Version 5.0</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    allofthem = head1+head2+body1+body2+body3+body4+body5+body6</span><br><span class="line">    filename = Component_name+<span class="string">&quot;.SchDoc&quot;</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(filename,<span class="string">&quot;w&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(allofthem)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;生成成功，文件名为&quot;</span>+filename)</span><br><span class="line">    os.system(<span class="string">&quot;start &quot;</span>+filename)</span><br><span class="line">    <span class="keyword">return</span> filename</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">uniqueid</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;生成8位随机大写字母=&gt;uniqueid!&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>.join(random.sample(string.ascii_uppercase, <span class="number">8</span>))</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">delete_extra_zero</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;删除小数点后多余的0&quot;&quot;&quot;</span></span><br><span class="line">    n = <span class="string">&#x27;&#123;:g&#125;&#x27;</span>.<span class="built_in">format</span>(n)</span><br><span class="line">    n = <span class="built_in">float</span>(n) <span class="keyword">if</span> <span class="string">&#x27;.&#x27;</span> <span class="keyword">in</span> n <span class="keyword">else</span> <span class="built_in">int</span>(n)</span><br><span class="line">    <span class="keyword">return</span> n</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    os.system(<span class="string">&quot;start &quot;</span>+main())</span><br><span class="line">    sys.exit()</span><br></pre></td></tr></table></figure><div class="tag-plugin ghcard"><a class="ghcard" rel="external nofollow noopener noreferrer" href="https://github.com/thun888/altium-helper"><img src="https://github-readme-stats.xaoxuu.com/api/pin/?username=thun888&repo=altium-helper&theme=dark&show_owner=true"/></a></div><p>再生成原理图库复制到自己的库就行了</p><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/23/63043a58d9141.webp" alt="Snipaste_2022-07-17_09-13-24" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">Snipaste_2022-07-17_09-13-24</span></div></div><h3 id="小说明"><a href="#小说明" class="headerlink" title="小说明"></a>小说明</h3><h4 id="放置类型"><a href="#放置类型" class="headerlink" title="放置类型"></a>放置类型</h4><table><thead><tr><th>И</th><th>凵(常用)</th><th>Z</th></tr></thead><tbody><tr><td><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/23/63043a2dd7177.webp" alt="Snipaste_2022-07-15_12-01-30" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">Snipaste_2022-07-15_12-01-30</span></div></div></td><td><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/23/63043a72e7aa3.webp" alt="Snipaste_2022-07-15_12-02-37" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">Snipaste_2022-07-15_12-02-37</span></div></div></td><td><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/23/63043a851122a.webp" alt="Snipaste_2022-07-15_12-03-26" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">Snipaste_2022-07-15_12-03-26</span></div></div></td></tr></tbody></table><h3 id="执行效果"><a href="#执行效果" class="headerlink" title="执行效果"></a>执行效果</h3><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/22/6303717c45a8a.webp" alt="Snipaste_2022-07-14_19-18-29" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">Snipaste_2022-07-14_19-18-29</span></div></div><h3 id="值得注意的点"><a href="#值得注意的点" class="headerlink" title="值得注意的点"></a>值得注意的点</h3><p>1. 在”模板“的头部中，<code>WEIGHT</code>代表着剩余的部件量，如果设置的太小当AD读取完后就不会往下读了，就会导致缺这缺那</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">|<span class="variable constant_">HEADER</span>=<span class="title class_">Protel</span> <span class="keyword">for</span> <span class="title class_">Windows</span> - <span class="title class_">Schematic</span> <span class="title class_">Capture</span> <span class="title class_">Ascii</span> <span class="title class_">File</span> <span class="title class_">Version</span> <span class="number">5.0</span>|<span class="variable constant_">WEIGHT</span>=<span class="number">38</span></span><br></pre></td></tr></table></figure><p>2.同样在”模板“的头部中，第二行中包括了纸张大小等的定义，如果遇到🐞可以适当修改</p><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/23/63043a9b1224c.webp" alt="image" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image</span></div></div>3.引脚方向依据`PINCONGLOMERATE`的值，连接方向向右时为56，从此每逆时针旋转90°加一<div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/23/63043af131a4c.webp" alt="Snipaste_2022-07-14_08-55-25" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">Snipaste_2022-07-14_08-55-25</span></div></div>4.xy坐标必须为不带小数的整数，不然ad立马扑街给你看<span class="tag-plugin emoji"><img no-lazy="" class="inline" src="https://jsd.hzchu.top/gh/cdn-x/emoji/aru-l/160.gif"/></span><h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ol><li><p><a href="https://blog.csdn.net/lly1122334/article/details/108770141">Python删除小数点后多余的0_XerCis的博客</a></p></li><li><p><a href="https://github.com/vadmium/python-altium/blob/master/format.md">Altium schematic file formatn88</a></p></li></ol>]]></content>
    
    
    <summary type="html">直接一套组合拳</summary>
    
    
    
    
    <category term="python" scheme="https://blog.hzchu.top/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>2021旧年总结</title>
    <link href="https://blog.hzchu.top/2022/2021%E6%97%A7%E5%B9%B4%E6%80%BB%E7%BB%93/"/>
    <id>https://blog.hzchu.top/2022/2021%E6%97%A7%E5%B9%B4%E6%80%BB%E7%BB%93/</id>
    <published>2022-01-31T21:37:15.000Z</published>
    <updated>2022-02-01T12:54:15.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="2021-has-ended-but-2022-begins"><a href="#2021-has-ended-but-2022-begins" class="headerlink" title="2021 has ended but 2022 begins"></a>2021 has ended but 2022 begins</h2><p>新年伊始，又是新的一年。做个年终总结吧。<del>证明我还活着</del></p><p>先看看曾经定的Todo list</p><ul><li><p><input checked="" disabled="" type="checkbox"> 进到实验班。</p></li><li><p><input checked="" disabled="" type="checkbox"> 设立导航</p></li><li><p><input disabled="" type="checkbox"> 被百度收录。看淡了，我把站点地图怼它脸上，写个脚本每4分钟提交一次，还没收录，\\\\\\\~\\\\\\\~百度是神马东西\\\\\\\~\\\\\\\~\\\~\\\~百度是神马东西\\\~\\\~\~\~百度是神马东西\~\~~~百度是神马东西~~<del>百度是神马东西</del></p></li><li><p><input checked="" disabled="" type="checkbox"> 写个基于cfw的工具。写了不少</p></li><li><p><input checked="" disabled="" type="checkbox"> Golang入门。大概吧</p></li></ul><p>过去的一年，好像时间变快了不少，不知不觉就过去了。6月份往前都在备考生地，放个暑假回来后又是各种考试，<del>两周一休算了算回家的次数好像还不到10次</del></p><p>学会了很多，也见证了不少（省略数千字）</p><blockquote><p>定个目标</p></blockquote><ul><li><p><input disabled="" type="checkbox"> 考上一中!   （和学校有约~</p></li><li><p><input checked="" disabled="" type="checkbox"> 最好再进实验班</p></li></ul><h4 id="附"><a href="#附" class="headerlink" title="附"></a>附</h4><p>因为没啥时间，也没有写到什么实质上的内容，不过也有2200+的小伙伴来访~</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/asstes/master/img/202202011232766.png" alt="Snipaste_2022-01-31_19-35-02" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">Snipaste_2022-01-31_19-35-02</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/asstes/master/img/202202011231533.png" alt="Snipaste_2022-01-31_19-35-28" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">Snipaste_2022-01-31_19-35-28</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/asstes/master/img/202202011232299.png" alt="大家梯子地区真广（划掉）" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">大家梯子地区真广（划掉）</span></div></div><hr><p>祝各位虎年大吉，虎虎生威<div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/asstes/master/img/202202011237099.jpg" alt="e0752da35b9e7a4b089f962442192898" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">e0752da35b9e7a4b089f962442192898</span></div></div></p>]]></content>
    
    
    <summary type="html">2021 has ended but 2022 begins</summary>
    
    
    
    
    <category term="yearreport" scheme="https://blog.hzchu.top/tags/yearreport/"/>
    
  </entry>
  
  <entry>
    <title>把玩intel的开发服务器</title>
    <link href="https://blog.hzchu.top/2021/%E6%8A%8A%E7%8E%A9intel%E7%9A%84%E5%BC%80%E5%8F%91%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    <id>https://blog.hzchu.top/2021/%E6%8A%8A%E7%8E%A9intel%E7%9A%84%E5%BC%80%E5%8F%91%E6%9C%8D%E5%8A%A1%E5%99%A8/</id>
    <published>2021-08-08T13:59:03.000Z</published>
    <updated>2021-08-08T13:59:03.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="获取"><a href="#获取" class="headerlink" title="获取"></a>获取</h4><p>打开<a href="https://d.hzchu.top/3">Intel® DevCloud</a>，有账号登录，没账号注册，</p><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/18/62fddfdb4a480.png" alt="image-20210808145043855" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210808145043855</span></div></div><p>拉下来找到<code>Intel® DevCloud for the Edge</code>点进去</p><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/18/62fddff130630.png" alt="62fddff130630" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">62fddff130630</span></div></div><blockquote><p>注意邮箱</p></blockquote><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/18/62fde00c0c138.png" alt="image-20210808145254426" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210808145254426</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/18/62fde01dcd877.png" alt="image-20210808145347119" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210808145347119</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/18/62fde02c21ac7.png" alt="image-20210808145438494" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210808145438494</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/18/62fde03a076a0.png" alt="image-20210808145505189" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210808145505189</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/18/62fde04eb6364.png" alt="image-20210808145523053" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210808145523053</span></div></div><p>在看到<code>Server not running</code>这个话前基本都500错误或者点了没反应，等半个小时就好(也可以切换网络环境等)</p><div class="tag-plugin gallery swiper" id="swiper-api" width="25"><div class="swiper-wrapper"><div class="swiper-slide"><img no-lazy src="https://k.hzchu.top/2022/08/18/62fde05e2fbdc.png" alt="Snipaste_2021-08-07_17-49-13" fancybox="true"/></div><div class="swiper-slide"><img no-lazy src="https://k.hzchu.top/2022/08/18/62fde0a76a277.png" alt="Snipaste_2021-08-07_18-35-16" fancybox="true"/></div></div><div class="swiper-pagination"></div><div class="swiper-button-prev blur"></div><div class="swiper-button-next blur"></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/18/62fde0b9b553c.png" alt="image-20210808145540103" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210808145540103</span></div></div><p>打开终端</p><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/18/62fde0c967b48.png" alt="Snipaste_2021-08-07_18-11-33" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">Snipaste_2021-08-07_18-11-33</span></div></div><p>然后就可以<del>为所欲为了</del><u>没有root</u>的啦<span class="tag-plugin emoji"><img no-lazy="" class="inline" src="https://jsd.hzchu.top/gh/cdn-x/emoji/aru-l/11.gif"/></span></p><h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><p>80核，256g( ‵▽′)ψ，（共用）</p><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/18/62fde0d94e6ff.png" alt="Snipaste_2021-08-07_18-21-17" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">Snipaste_2021-08-07_18-21-17</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/18/62fde0e87a505.png" alt="Snipaste_2021-08-07_18-28-07" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">Snipaste_2021-08-07_18-28-07</span></div></div><p>proot容器内测试</p><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/18/62fde0f84f77e.png" alt="image-20210808150809533" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210808150809533</span></div></div><h4 id="网速"><a href="#网速" class="headerlink" title="网速"></a>网速</h4><p>Asia</p><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/18/62fde10b1cf7b.png" alt="image-20210808151147629" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210808151147629</span></div></div><p>Another</p><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/18/62fde11867eea.png" alt="image-20210808151132419" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210808151132419</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/18/62fde16b1e5df.png" alt="image-20210808151201095" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210808151201095</span></div></div><h4 id="伪获取root权限"><a href="#伪获取root权限" class="headerlink" title="伪获取root权限"></a>伪获取root权限</h4><p>在终端内复制粘贴以下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://share.hzchu.top/%E8%BD%AF%E4%BB%B6/root.sh</span><br><span class="line"><span class="built_in">chmod</span> 777 root.sh</span><br><span class="line">./root.sh</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/18/62fde19fc8cae.png" alt="image-20210808140827984" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210808140827984</span></div></div><p>当$变为#就ok</p><p>不过wget,curl这些都没有，所以还要自行安装</p><p>PS:可以开新一个终端下载一些必要依赖包（deb）再离线安装</p><blockquote><p><a href="https://packages.debian.org/">https://packages.debian.org</a></p></blockquote><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/18/62fde1ab782d3.png" alt="image-20210808143134070" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210808143134070</span></div></div><blockquote><p>该服务器使用时间只有10小时，但10小时后还可以再来一次<span class="tag-plugin emoji"></span></p></blockquote>]]></content>
    
    
    <summary type="html">如今，人们白嫖起了牙膏厂~</summary>
    
    
    
    
    <category term="Intel" scheme="https://blog.hzchu.top/tags/Intel/"/>
    
  </entry>
  
  <entry>
    <title>解决Cloudflare Wrangler无法获取授权</title>
    <link href="https://blog.hzchu.top/2021/%E8%A7%A3%E5%86%B3Cloudflare-Wrangler%E6%97%A0%E6%B3%95%E8%8E%B7%E5%8F%96%E6%8E%88%E6%9D%83/"/>
    <id>https://blog.hzchu.top/2021/%E8%A7%A3%E5%86%B3Cloudflare-Wrangler%E6%97%A0%E6%B3%95%E8%8E%B7%E5%8F%96%E6%8E%88%E6%9D%83/</id>
    <published>2021-07-29T18:18:05.000Z</published>
    <updated>2021-07-29T18:18:05.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>昨天，因为要本地提交点东西到worker就装了Wrangler，没想到啊，它就这么卡着不动了（在waiting for api token那里我等了半个世纪）<div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/18/62fde84075a94.png" alt="Snipaste_2021-07-26_20-36-47" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">Snipaste_2021-07-26_20-36-47</span></div></div></p><h4 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h4><ul><li><p>在刚刚的授权页面点击<code>API令牌</code></p><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/18/62fde825cdbed.png" alt="llll" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">llll</span></div></div></li><li><p>点<code>投放</code>–<code>copy</code></p><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/18/62fde5fd96553.png" alt="Snipaste_2021-07-26_20-38-00" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">Snipaste_2021-07-26_20-38-00</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/18/62fde60f90dc8.png" alt="Snipaste_2021-07-26_20-38-15" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">Snipaste_2021-07-26_20-38-15</span></div></div></li><li><p>输入<code>wrangler config</code>,粘贴刚刚copy的token</p></li></ul><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/18/62fde61b32b17.png" alt="Snipaste_2021-07-26_20-37-15" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">Snipaste_2021-07-26_20-37-15</span></div></div><ul><li><p>回车后看到sucess就好了</p><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/18/62fde62d8262c.png" alt="Snipaste_2021-07-26_20-38-30" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">Snipaste_2021-07-26_20-38-30</span></div></div></li></ul><h4 id="后"><a href="#后" class="headerlink" title="后"></a>后</h4><p>写的时侯为了截图换了个账号，然后它能用了~~~~</p><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/18/62fde6529a01d.png" alt="Snipaste_2021-07-29_18-26-37" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">Snipaste_2021-07-29_18-26-37</span></div></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h4&gt;&lt;p&gt;昨天，因为要本地提交点东西到worker就装了Wrangler，没想到啊，它就这么卡着不动了（在waiting for api token那</summary>
      
    
    
    
    
    <category term="Clouddlare" scheme="https://blog.hzchu.top/tags/Clouddlare/"/>
    
  </entry>
  
  <entry>
    <title>解决VSCode安装Go扩展报错</title>
    <link href="https://blog.hzchu.top/2021/%E8%A7%A3%E5%86%B3VSCode%E5%AE%89%E8%A3%85Go%E6%89%A9%E5%B1%95%E6%8A%A5%E9%94%99/"/>
    <id>https://blog.hzchu.top/2021/%E8%A7%A3%E5%86%B3VSCode%E5%AE%89%E8%A3%85Go%E6%89%A9%E5%B1%95%E6%8A%A5%E9%94%99/</id>
    <published>2021-07-26T18:37:56.000Z</published>
    <updated>2021-07-26T18:37:56.000Z</updated>
    
    <content type="html"><![CDATA[<p>不多哔哔，直入主题</p><p>先转到新建环境变量这里（图示为win11</p><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/18/62fde67a827da.png" fancybox="true"/></div></div><p>新建2个（如图）</p><div class="tag-plugin image"><div class="image-bg"><img src="https://k.hzchu.top/2022/08/18/62fde685a8fe8.png" alt="image-20210726184350014" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210726184350014</span></div></div><table><thead><tr><th>变量名</th><th>变量值</th></tr></thead><tbody><tr><td>GOPROXY</td><td><a href="https://goproxy.io/">https://goproxy.io</a></td></tr><tr><td>GO111MODULE</td><td>on</td></tr></tbody></table><p>点确定后<strong>重启</strong>再进VSCode里选择<code>install all</code>安装就好</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;不多哔哔，直入主题&lt;/p&gt;
&lt;p&gt;先转到新建环境变量这里（图示为win11&lt;/p&gt;
&lt;div class=&quot;tag-plugin image&quot;&gt;&lt;div class=&quot;image-bg&quot;&gt;&lt;img src=&quot;https://k.hzchu.top/2022/08/18/62</summary>
      
    
    
    
    
    <category term="Go" scheme="https://blog.hzchu.top/tags/Go/"/>
    
  </entry>
  
  <entry>
    <title>为Stellar主题添加HPP的&quot;说说&quot;功能</title>
    <link href="https://blog.hzchu.top/2021/%E4%B8%BAStellar%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0HPP%E8%AF%B4%E8%AF%B4%E5%8A%9F%E8%83%BD/"/>
    <id>https://blog.hzchu.top/2021/%E4%B8%BAStellar%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0HPP%E8%AF%B4%E8%AF%B4%E5%8A%9F%E8%83%BD/</id>
    <published>2021-07-15T20:09:32.000Z</published>
    <updated>2021-07-15T20:09:32.000Z</updated>
    
    <content type="html"><![CDATA[<p>HPP,即<code>HexoPlusPlus</code>,其中自带了”说说”功能，但我正在用的Stellar不支持，那就自己加吧</p><blockquote><p>与某个页面合并了</p></blockquote><h4 id="选址"><a href="#选址" class="headerlink" title="选址"></a>选址</h4><p>纵观全局，我看到了左侧栏的”文章”，加了进去，却成了这个鸟样子（橙框为我手动框出来的）</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210715185701431.png" alt="image-20210715185701431" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210715185701431</span></div></div><p>再品，放这里不就好了😎</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210715185830748.png" alt="image-20210715185830748" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210715185830748</span></div></div><h4 id="开工"><a href="#开工" class="headerlink" title="开工"></a>开工</h4><p>因为主题在不同语言时有不同显示，所以先从语言文件下手</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210715190020030.png" alt="image-20210715190020030" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210715190020030</span></div></div><p>找到”归档”对应的是<code>archives</code>，再用<code>everything</code>在主题文件中搜索</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210715190202563.png" alt="image-20210715190202563" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210715190202563</span></div></div><p>前4个是语言文件，第5个是生成归档页面的，那第6个就有很大嫌疑了，打开看看</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210715190356447.png" alt="image-20210715190356447" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210715190356447</span></div></div><p>啊没错，就是它，而且类名也对的上（当初直接查类名更快啊＞﹏＜）</p><p>格式就像这样</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (site.posts &amp;&amp; site.posts.length &gt; 0) &#123; %&gt;</span><br><span class="line">  &lt;% if (is_archive()) &#123; %&gt;</span><br><span class="line">    &lt;a class=&#x27;active&#x27; href=&#x27;&lt;%- url_for(config.archive_dir) %&gt;&#x27;&gt;&lt;%- __(&#x27;btn.archives&#x27;) %&gt;&lt;/a&gt;</span><br><span class="line">  &lt;% &#125; else &#123; %&gt;</span><br><span class="line">    &lt;a href=&#x27;&lt;%- url_for(config.archive_dir) %&gt;&#x27;&gt;&lt;%- __(&#x27;btn.archives&#x27;) %&gt;&lt;/a&gt;</span><br><span class="line">  &lt;% &#125; %&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><p>添加上去后把所有<code>archives</code>给替换成了<code>htalk</code>,但是一运行那报错和放鞭炮没什么不同(。﹏。)</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210715203736270.png" alt="image-20210715203736270" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210715203736270</span></div></div><p>从代码上说，这句是判断当前是什么页面的，我翻了亿下没找到它的定义在哪个文件，就先改回posts（只是影响了按钮底色，问题不大(❁´◡`❁)）</p><p>在<code>\themes\stellar\layout</code>下新建<code>htalk.ejs</code>,从隔壁<code>tag.ejs</code>借鉴点代码过来，除了site.tags.length其他都改为htalk</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210715204525167.png" alt="image-20210715204525167" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210715204525167</span></div></div><p>可以看出第11行到21行都是页面中可以显示出来的部分~~（不太严谨的样子~~</p><p>把HPP文档中的”引入部分”插到里面</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210715205153957.png" alt="image-20210715205153957" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210715205153957</span></div></div><p>¯_(ツ)_&#x2F;¯</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210715204930656.png" alt="image-20210715204930656" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210715204930656</span></div></div><p>加个题目</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">&#x27;list-title h3&#x27;</span>&gt;</span>说说（瞎扯）<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210715205203844.png" alt="image-20210715205203844" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210715205203844</span></div></div><hr><p>承 接 前 文，看着”说说”按钮选中时没有底色还是有点不爽，回到前面</p><p>把判定部分<del>都删了</del>删到只剩下一个基础的判定（虽然没用但删了就报错），给它加上<code>id=&quot;nav-bb&quot;</code>的属性</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210715210320086.png" alt="image-20210715210320086" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210715210320086</span></div></div><p>再在htalk.ejs中加上</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;nav-bb&#x27;</span>).<span class="property">className</span>=<span class="string">&#x27;active&#x27;</span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>( •̀ ω •́ )✧</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210715205705037.png" alt="image-20210715205705037" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210715205705037</span></div></div><h4 id="最终代码"><a href="#最终代码" class="headerlink" title="最终代码"></a>最终代码</h4><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210715205828548.png" alt="image-20210715205828548" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210715205828548</span></div></div><p>!!!  warning<br>1.记得使用<code>hexo new page htalk</code>并在<code>layout</code>中改为<code>htalk</code><br><br>2.在博客根目录下的<code>_config.yml</code>中要指明<code>htalk_dir: htalk</code></p>]]></content>
    
    
    <summary type="html">HPP,即`HexoPlusPlus`,其中自带了&quot;说说&quot;功能，但我正在用的Stellar不支持，那就自己加吧</summary>
    
    
    
    
    <category term="blog" scheme="https://blog.hzchu.top/tags/blog/"/>
    
  </entry>
  
  <entry>
    <title>优化Oneindex的nexmoe主题的加载速度</title>
    <link href="https://blog.hzchu.top/2021/%E4%BC%98%E5%8C%96Oneindex%E7%9A%84nexmoe%E4%B8%BB%E9%A2%98%E7%9A%84%E5%8A%A0%E8%BD%BD%E9%80%9F%E5%BA%A6/"/>
    <id>https://blog.hzchu.top/2021/%E4%BC%98%E5%8C%96Oneindex%E7%9A%84nexmoe%E4%B8%BB%E9%A2%98%E7%9A%84%E5%8A%A0%E8%BD%BD%E9%80%9F%E5%BA%A6/</id>
    <published>2021-06-10T14:37:59.000Z</published>
    <updated>2021-06-10T14:37:59.000Z</updated>
    
    <content type="html"><![CDATA[<p>在一些带宽小的机子上部署Oneindex又用nexmoe主题，就算套了cdn也慢（深有体会）</p><p>在学校开来给同学下电影开了十几秒愣是没加载出来<img src="https://raw.hzchu.top/thun888/jian/master/coolapk_emotion_42_diaoxie.png" style="zoom:25%;" /></p><h4 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h4><p>定位到网址目录下的&#x2F;view&#x2F;nexmoe</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/20210610144611.png" alt="image-20210610144610288" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210610144610288</span></div></div><p>将框选的（第7行的第11行）</p><p>进行替换</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/20210610145355.png" alt="image-20210610145355484" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210610145355484</span></div></div><p>第7行</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;//unpkg.com/mdui@1.0.1/dist/css/mdui.min.css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>第11行</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;//raw.githubusercontent.com/thun888/tuku/master/img/mdui.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>like this</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/20210610145809.png" alt="image-20210610145809885" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210610145809885</span></div></div><h4 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h4><p>修改前</p><img src="https://raw.hzchu.top/thun888/tuku/master/img/20210610150256.png" alt="image-20210610150255933" style="zoom:67%;" /><p>修改后</p><img src="https://raw.hzchu.top/thun888/tuku/master/img/20210610150015.png" alt="image-20210610150015253" style="zoom:67%;" />]]></content>
    
    
    <summary type="html">在一些带宽小的机子上部署Oneindex又用nexmoe主题，在学校开来给同学下电影开了十几秒愣是没加载出来</summary>
    
    
    
    
    <category term="oneindex" scheme="https://blog.hzchu.top/tags/oneindex/"/>
    
    <category term="web" scheme="https://blog.hzchu.top/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>高质量地从ico转为svg</title>
    <link href="https://blog.hzchu.top/2021/%E9%AB%98%E8%B4%A8%E9%87%8F%E5%9C%B0%E4%BB%8Eico%E8%BD%AC%E4%B8%BAsvg/"/>
    <id>https://blog.hzchu.top/2021/%E9%AB%98%E8%B4%A8%E9%87%8F%E5%9C%B0%E4%BB%8Eico%E8%BD%AC%E4%B8%BAsvg/</id>
    <published>2021-05-03T19:19:00.000Z</published>
    <updated>2021-05-03T19:19:00.000Z</updated>
    
    <content type="html"><![CDATA[<h5 id="How"><a href="#How" class="headerlink" title="How"></a>How</h5><p>先下载&amp;安装<a href="https://share.hzchu.top/api?path=/%E8%BD%AF%E4%BB%B6/CorelDRAW_X4_SP2_%E7%B2%BE%E7%AE%80%E5%A2%9E%E5%BC%BA%E7%89%88.exe&raw=true">CorelDRAW</a></p><p>打开ps将ico转为png</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/14dsf352gf.gif" alt="14dsf352gf" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">14dsf352gf</span></div></div><p>导出后像这样</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/icon.png" alt="icon" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">icon</span></div></div><p>选择 文件—导入—（选择刚刚的图）</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/20210504155534.png" fancybox="true"/></div></div><p>放置在画纸后</p><p>右键—轮廓描慕—高质量图像（也可以选其他的,根据实际情况~）</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/20210504155749.png" fancybox="true"/></div></div><p>在这里你可以改变三个参数实现不同的效果</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/dg4df56hde4568.png" fancybox="true"/></div></div><p>点击确定后就能得到2个图像（原来的位图和生成的矢量图）</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/20210504160151.png" fancybox="true"/></div></div><p>把原图删掉后将画布调整为生成图大小（例如我这就是210*210）</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/da21desf4s568gre46g.png)" alt="选择 文件---导出（保存为.svg" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">选择 文件---导出（保存为.svg</span></div></div><img src="https://raw.hzchu.top/thun888/tuku/master/img/20210504161231.png" style="zoom:80%;" /><h5 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h5><p>要真想更好一点可以用这个为底，重绘一遍</p>]]></content>
    
    
    <summary type="html">使用CorelDRAW将图片转为矢量图</summary>
    
    
    
    
    <category term="网站" scheme="https://blog.hzchu.top/tags/%E7%BD%91%E7%AB%99/"/>
    
    <category term="转换" scheme="https://blog.hzchu.top/tags/%E8%BD%AC%E6%8D%A2/"/>
    
  </entry>
  
  <entry>
    <title>解决小米手机升级MIUI12.5后无法进入谷歌商店</title>
    <link href="https://blog.hzchu.top/2021/%E8%A7%A3%E5%86%B3%E5%B0%8F%E7%B1%B3%E6%89%8B%E6%9C%BA%E5%8D%87%E7%BA%A7MIUI12-5%E5%90%8E%E6%97%A0%E6%B3%95%E8%BF%9B%E5%85%A5%E8%B0%B7%E6%AD%8C%E5%95%86%E5%BA%97/"/>
    <id>https://blog.hzchu.top/2021/%E8%A7%A3%E5%86%B3%E5%B0%8F%E7%B1%B3%E6%89%8B%E6%9C%BA%E5%8D%87%E7%BA%A7MIUI12-5%E5%90%8E%E6%97%A0%E6%B3%95%E8%BF%9B%E5%85%A5%E8%B0%B7%E6%AD%8C%E5%95%86%E5%BA%97/</id>
    <published>2021-04-30T23:02:58.000Z</published>
    <updated>2021-04-30T23:02:58.000Z</updated>
    
    <content type="html"><![CDATA[<p>之前，用着被抛弃的mi6，升级了12后并无异样，但用第三方包升到12.5后，欸，用不了了</p><span id="more"></span><div class="tag-plugin gallery swiper" id="swiper-api" width="25"><div class="swiper-wrapper"><div class="swiper-slide"><img no-lazy src="https://raw.hzchu.top/thun888/tuku/master/img/IMG_20210424_212057.jpg" fancybox="true"/></div><div class="swiper-slide"><img no-lazy src="https://raw.hzchu.top/thun888/tuku/master/img/Screenshot_2021-04-24-21-19-58-835_com.android.ve.jpg" fancybox="true"/></div><div class="swiper-slide"><img no-lazy src="https://raw.hzchu.top/thun888/tuku/master/img/Screenshot_2021-04-24-21-20-21-301_com.android.ve.jpg" fancybox="true"/></div></div><div class="swiper-pagination"></div><div class="swiper-button-prev blur"></div><div class="swiper-button-next blur"></div></div><p>（如图）</p><p>显然，是新版的“照明弹”引起的</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/dsfdsvdzsggdf.jpg" fancybox="true"/></div></div><p>搜索一下可以看到有好几个</p><p>把里面每一个权限选择了“空白通行证”的改为“始终允许”</p><img src="https://raw.hzchu.top/thun888/tuku/master/img/Screenshot_2021-04-30-23-12-52-256_com.miui.secur.jpg" style="zoom: 80%;" />]]></content>
    
    
    <summary type="html">&lt;p&gt;之前，用着被抛弃的mi6，升级了12后并无异样，但用第三方包升到12.5后，欸，用不了了&lt;/p&gt;</summary>
    
    
    
    
    <category term="MIUI" scheme="https://blog.hzchu.top/tags/MIUI/"/>
    
  </entry>
  
  <entry>
    <title>VM虚拟机安装甜糖及配置教程</title>
    <link href="https://blog.hzchu.top/2021/vm%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85%E7%94%9C%E7%B3%96%E5%8F%8A%E9%85%8D%E7%BD%AE%E6%95%99%E7%A8%8B/"/>
    <id>https://blog.hzchu.top/2021/vm%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85%E7%94%9C%E7%B3%96%E5%8F%8A%E9%85%8D%E7%BD%AE%E6%95%99%E7%A8%8B/</id>
    <published>2021-02-07T10:05:21.000Z</published>
    <updated>2021-02-07T10:05:21.000Z</updated>
    
    <content type="html"><![CDATA[<h4 id="文章部分内容不再适用"><a href="#文章部分内容不再适用" class="headerlink" title="文章部分内容不再适用"></a>文章部分内容不再适用</h4><h4 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h4><p>一开始我是在电脑上挂网心，但这玩意儿写入缓存不仅多（以至于写掉盘了），钱还给的少。而甜糖在恩山论坛上面的都是Linux下操作的，对我这docker小白很不友好，今天就总结一下最简单的方法</p><p><em>以下内容建议使用FinalShell操作</em></p><h4 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h4><ol><li><p>映像包（<a href="https://share.hzchu.top/ali/%E6%96%87%E4%BB%B6/ttnode/">500g&#x2F;100g</a>)(在我写的时候又有新版了<img src="https://raw.hzchu.top/thun888/jian/master/coolapk_emotion_58_dogeyuanliangta.png" style="zoom:25%;" />)</p></li><li><p>vmware</p></li></ol><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><ol><li><p>安装vmware(废话)</p></li><li><p>解压压缩包后。点击后缀为vmx的文件导入</p></li></ol><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210207111610777.png" alt="image-20210207111610777" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210207111610777</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210207111650865.png" alt="image-20210207111650865" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210207111650865</span></div></div><p>然后点击网络适配器一来生成新的MAC地址（避免用uid重复）</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210207111823559.png" alt="image-20210207111823559" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210207111823559</span></div></div><p>点击开启虚拟机</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210207111851540.png" alt="image-20210207111851540" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210207111851540</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210207112026798.png" alt="image-20210207112026798" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210207112026798</span></div></div><p>当然开起成功后就可以通过甜糖app绑定了</p><img src="https://raw.hzchu.top/thun888/tuku/master/img/Screenshot_2021-02-07-11-22-10-647_com.tt.turbo.jpg" alt="Screenshot_2021-02-07-11-22-10-647_com.tt.turbo" style="zoom:33%;" /><p>当然有时候如果你的网络环境比较复杂搜不到就要在ssh里面查看。</p><p>使用ssh连接(账号密码都是root)</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210207112118813.png" alt="image-20210207112118813" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210207112118813</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210207112607312.png" alt="image-20210207112607312" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210207112607312</span></div></div><p>输入(进入容器)</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it ttnode /bin/bash</span><br><span class="line">/usr/node/ttnode -p /mnts </span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210207112818753.png" alt="image-20210207112818753" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210207112818753</span></div></div><p>用<a href="http://2v.dedecms.com/">二维码生成工具</a>，把uid生成二维码再用手机扫码绑定.</p><p>如果它显示未配置网络的话就继续看吧</p><script>new Artalk({el: '#ArtalkComments', // 元素选择placeholder: '来啊，快活啊 ( ゜- ゜)', // 占位符noComment: '快来成为第一个评论的人吧\~', // 无评论时显示serverUrl: 'https://artalk.hzchu.top/',readMore: { // 阅读更多配置pageSize: 15, // 每次请求获取评论数autoLoad: true // 滚动到底部自动加载}});</script><p>输入</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -tnlp </span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210207121851667.png" alt="image-20210207121851667" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210207121851667</span></div></div><p>除计下出65432和22以外的三个端口后在路由器后台设置端口转发这里，以小米路由器为例</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210207122326918.png" alt="image-20210207122326918" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210207122326918</span></div></div><p>等上十几二十分钟甜糖后台同步后即可。</p><p>这样甜糖就做好了，但是还有很多东西也可以搞</p><p>1.自动领取星愿</p><p>保持在容器内不要退出</p><p>输入</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br><span class="line">apt install wget curl sudo -y</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://dachui.co/ttnode/node2.sh &amp;&amp; sh node2.sh</span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210207120438729.png" alt="image-20210207120438729" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210207120438729</span></div></div><p>输入no后回车(第2步输入y回车即可)</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210207120714379.png" alt="image-20210207120714379" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210207120714379</span></div></div><p>这里面还有很多功能，但我用到的只是5，有需求的可以把都搞上(除了1.2<img src="https://raw.hzchu.top/thun888/jian/master/coolapk_emotion_58_dogeyuanliangta.png" style="zoom:25%;" />)</p><p>选择5后回车</p><p>输入手机号码</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210207120856494.png" alt="image-20210207120856494" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210207120856494</span></div></div><p>输入验证码即可</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210207121007656.png" alt="image-20210207121007656" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210207121007656</span></div></div><p>如果还要用到微信通知就继续</p><p>在server酱的官网用登录+微信关注后取得sckey填入</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210207121247337.png" alt="image-20210207121247337" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210207121247337</span></div></div><p>成功以后</p><img src="https://raw.hzchu.top/thun888/tuku/master/img/Screenshot_2021-02-07-12-14-30-735_com.tencent.mm.jpg" alt="image-20210207121352264" style="zoom: 33%;" /><p>3.网速监控</p><p>虽然FinalShell自带网速监控，<img src="C:\\Users\\22383\\AppData\\Roaming\\Typora\\typora-user-images\\image-20210207130000887.png" alt="image-20210207130000887" style="zoom: 67%;" />但也不总是每天都在电脑旁</p><p>输入</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apk add nload</span><br></pre></td></tr></table></figure><p>然后就可以通过nload eth0来监控了</p><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210207130443674.png" alt="image-20210207130443674" style="zoom: 67%;" /><h4 id="Q-A"><a href="#Q-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h4><ol><li><p>Q:明明什么都设置好了，但就是获取不了IP。</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202021-02-05%20123641.png" alt="屏幕截图 2021-02-05 123641" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">屏幕截图 2021-02-05 123641</span></div></div><p>A:(该问题常见于多网卡的情况)</p></li></ol><img src="https://raw.hzchu.top/thun888/tuku/master/img/ada.png"/><p>2.Q:为什么收不到验证码？</p><p>​    A:再来一次(如果你一天内已经错了14次的话，就明天再做吧)</p><p>3.Q:输指令报错 xxx not found</p><p>A:缺啥补啥，在容器外用apk add xxx ,容器内用apt install xxx</p><p>more….</p><h4 id="所参考资料"><a href="#所参考资料" class="headerlink" title="所参考资料"></a>所参考资料</h4><p><a href="https://d.hzchu.top/f">[2021-01-27]让软路由来赚钱ESXi&#x2F;X86上跑dock甜糖&#x2F;一键导入简单无脑，小白，懒人专属</a></p><p><a href="https://d.hzchu.top/g">【非op套娃】x86以ubuntu为底层跑docker甜糖服务</a></p><p><a href="https://d.hzchu.top/h">迄今为止最小的甜糖(ttnode)docker镜像</a></p><p><a href="https://d.hzchu.top/i">爱快虚拟机甜糖镜像及pve,esxi等虚拟机安装轻量化Linux详细安装甜糖教程</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h4 id=&quot;文章部分内容不再适用&quot;&gt;&lt;a href=&quot;#文章部分内容不再适用&quot; class=&quot;headerlink&quot; title=&quot;文章部分内容不再适用&quot;&gt;&lt;/a&gt;文章部分内容不再适用&lt;/h4&gt;&lt;h4 id=&quot;背景&quot;&gt;&lt;a href=&quot;#背景&quot; class=&quot;headerli</summary>
      
    
    
    
    
    <category term="甜糖" scheme="https://blog.hzchu.top/tags/%E7%94%9C%E7%B3%96/"/>
    
  </entry>
  
  <entry>
    <title>搭建Teambition网盘的目录索引</title>
    <link href="https://blog.hzchu.top/2021/%E6%90%AD%E5%BB%BATeambition%E7%BD%91%E7%9B%98%E7%9A%84%E7%9B%AE%E5%BD%95%E7%B4%A2%E5%BC%95/"/>
    <id>https://blog.hzchu.top/2021/%E6%90%AD%E5%BB%BATeambition%E7%BD%91%E7%9B%98%E7%9A%84%E7%9B%AE%E5%BD%95%E7%B4%A2%E5%BC%95/</id>
    <published>2021-01-01T09:39:47.000Z</published>
    <updated>2021-01-01T09:39:47.000Z</updated>
    
    <content type="html"><![CDATA[<p>github链接：<a href="https://d.hzchu.top/4">TeambitionShare</a></p><h3 id="文章已过期！"><a href="#文章已过期！" class="headerlink" title="文章已过期！"></a>文章已过期！</h3><h4 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h4><ul><li><p>Teambition账号</p></li><li><p>一台云服务器&#x2F;支持PHP的虚拟主机</p></li></ul><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p>这里以宝塔面板为例</p><p>先创建</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210101095911579.png" alt="image-20210101095911579" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210101095911579</span></div></div><p>从github把源码下载后上传然后解压</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210101100249006.png" alt="image-20210101100249006" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210101100249006</span></div></div><p>进到&#x2F;TeambitionShare-master里把源码拉出来</p><p>gif:<div class="tag-plugin image"><div class="image-bg"><img src="https://onep.hzchu.top/mount/pic/2021/09/5f5c8175d7b846cfe33f818b4b7e0791.webp" alt="20210101100433" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">20210101100433</span></div></div></p><p>然后配置伪静态（不设置会404）</p><p>Nginx</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#根目录伪静态</span><br><span class="line">location / &#123;</span><br><span class="line">  if (!-e $request_filename)&#123;</span><br><span class="line">    rewrite ^(.*)$ /index.php/?s=$1;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">#二级目录伪静态，自行修改pan为你的二级目录名字</span><br><span class="line">location /pan &#123;</span><br><span class="line">  if (!-e $request_filename)&#123;</span><br><span class="line">    rewrite ^/pan/(.*)$ /pan/index.php/?s=$1;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Apache</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&lt;IfModule</span> <span class="string">mod_rewrite.c&gt;</span></span><br><span class="line">  <span class="string">Options</span> <span class="string">+FollowSymlinks</span> <span class="string">-Multiviews</span></span><br><span class="line">  <span class="string">RewriteEngine</span> <span class="string">On</span></span><br><span class="line">  <span class="string">RewriteCond</span> <span class="string">%&#123;REQUEST_FILENAME&#125;</span> <span class="string">!-d</span></span><br><span class="line">  <span class="string">RewriteCond</span> <span class="string">%&#123;REQUEST_FILENAME&#125;</span> <span class="string">!-f</span></span><br><span class="line">  <span class="string">RewriteRule</span> <span class="string">^(.*)$</span> <span class="string">index.php/?s=$1</span> [<span class="string">QSA</span>,<span class="string">PT</span>,<span class="string">L</span>]</span><br><span class="line"><span class="string">&lt;/IfModule&gt;</span></span><br></pre></td></tr></table></figure><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210101101126292.png" alt="image-20210101101126292" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210101101126292</span></div></div><p>在<a href="http://www.teambition.com上登录账号/">www.teambition.com上登录账号</a></p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210101101410967.png" alt="image-20210101101410967" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210101101410967</span></div></div><p>新建一个项目（<strong>更多</strong>里）（<strong>不创建项目网盘中的所有的内容都会展示出来</strong>）</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/20210101101526.gif" alt="20210101101526" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">20210101101526</span></div></div><p>获取项目id</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210101102115026.png" alt="image-20210101102115026" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210101102115026</span></div></div><p>获取cookie</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210101111420025.png" alt="image-20210101111420025" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210101111420025</span></div></div><p>访问刚刚部署的网站，把cookie和项目id填好</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210101111500122.png" alt="image-20210101111500122" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210101111500122</span></div></div><p>（如果出现500可以删除&#x2F;config&#x2F;app.cfg.php重来）</p><h4 id="ok"><a href="#ok" class="headerlink" title="ok"></a>ok</h4><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20210101111805262.png" alt="image-20210101111805262" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20210101111805262</span></div></div>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;github链接：&lt;a href=&quot;https://d.hzchu.top/4&quot;&gt;TeambitionShare&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;文章已过期！&quot;&gt;&lt;a href=&quot;#文章已过期！&quot; class=&quot;headerlink&quot; title=&quot;文章已过期！&quot;&gt;&lt;/a&gt;</summary>
      
    
    
    
    
    <category term="web" scheme="https://blog.hzchu.top/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>用Batocera搭建属于你的游戏天地</title>
    <link href="https://blog.hzchu.top/2020/%E7%94%A8batocera%E6%90%AD%E5%BB%BA%E5%B1%9E%E4%BA%8E%E4%BD%A0%E7%9A%84%E6%B8%B8%E6%88%8F%E5%A4%A9%E5%9C%B0/"/>
    <id>https://blog.hzchu.top/2020/%E7%94%A8batocera%E6%90%AD%E5%BB%BA%E5%B1%9E%E4%BA%8E%E4%BD%A0%E7%9A%84%E6%B8%B8%E6%88%8F%E5%A4%A9%E5%9C%B0/</id>
    <published>2020-11-14T17:42:35.000Z</published>
    <updated>2020-11-14T17:42:35.000Z</updated>
    
    <content type="html"><![CDATA[<p>batocera,是一个以linux为基础，运行在电脑上的一个模拟上古游戏机的系统。</p><p>为了使用它，首先我们需要以下物品</p><h4 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h4><ul><li>手和脑子</li><li>U盘（最好3.0，不过2.0也能运行）</li><li>电脑</li><li>balenaEtcher（选用）（安装方法一）</li><li>Ventoy（选用）（安装方法二）</li></ul><h4 id="安装方法一"><a href="#安装方法一" class="headerlink" title="安装方法一"></a>安装方法一</h4><p><strong>声明</strong>：这种方法会<strong>丢失U盘全部数据</strong>，<strong>需要备份</strong></p><p>安装好balenaEtcher</p><p>打开来是这个样子</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20201114175521447.png" alt="image-20201114175521447" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20201114175521447</span></div></div><p>下载好<a href="https://d.hzchu.top/5">batocera</a></p><p>点击flash from file,选择刚刚下载好的镜像</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20201114175955744.png" alt="image-20201114175955744" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20201114175955744</span></div></div><p>点击 Select target,选择你准备好的U盘</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20201114180210307.png" alt="image-20201114180210307" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20201114180210307</span></div></div><p><strong>确认选择无误</strong>后点击 Flash！ 即可完成</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20201114190128591.png)" alt="#### 安装方法二 **声明**：这种方法会**丢失U盘全部数据**，**需要备份**（但相比第一种还可以用来存文件~ image-20201114190128591" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">#### 安装方法二 **声明**：这种方法会**丢失U盘全部数据**，**需要备份**（但相比第一种还可以用来存文件~ image-20201114190128591</span></div></div><p>下载<a href="https://d.hzchu.top/6">ventoy</a>解压后点Ventoy2Disk.exe运行</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20201114180544409.png" alt="image-20201114180544409" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20201114180544409</span></div></div><p>next，</p><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20201114180821706.png" alt="image-20201114180821706" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20201114180821706</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20201114180853314.png" alt="image-20201114180853314" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20201114180853314</span></div></div><div class="tag-plugin image"><div class="image-bg"><img src="https://raw.hzchu.top/thun888/tuku/master/img/image-20201114180937948.png" alt="image-20201114180937948" fancybox="true"/></div><div class="image-meta"><span class="image-caption center">image-20201114180937948</span></div></div><p>然后将刚刚下载后的镜像复制进U盘里（最大的那个分区）即可</p><h4 id=""><a href="#" class="headerlink" title=""></a></h4><h4 id="后："><a href="#后：" class="headerlink" title="后："></a>后：</h4><ul><li>在一些电脑上要按F12选择从U盘启动</li><li>它将全部机能分配在游戏运行上，相比模拟器性能好许多，对老电脑友好</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;batocera,是一个以linux为基础，运行在电脑上的一个模拟上古游戏机的系统。&lt;/p&gt;
&lt;p&gt;为了使用它，首先我们需要以下物品&lt;/p&gt;
&lt;h4 id=&quot;准备&quot;&gt;&lt;a href=&quot;#准备&quot; class=&quot;headerlink&quot; title=&quot;准备&quot;&gt;&lt;/a&gt;准备&lt;/h4</summary>
      
    
    
    
    
    <category term="linux" scheme="https://blog.hzchu.top/tags/linux/"/>
    
  </entry>
  
</feed>
